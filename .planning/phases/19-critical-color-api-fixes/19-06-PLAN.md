---
phase: 19-critical-color-api-fixes
plan: 06
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/registry/ui/calendar.tsx
  - packages/registry/ui/pagination.tsx
  - packages/registry/ui/tag-input.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "All icon components in calendar, pagination, tag-input use colors.foreground instead of #000"
    - "Tag-input suggestions shadow uses platformShadow() instead of hardcoded shadowColor"
  artifacts:
    - path: "packages/registry/ui/calendar.tsx"
      provides: "Theme-aware chevron icons"
      contains: "colors.foreground"
    - path: "packages/registry/ui/pagination.tsx"
      provides: "Theme-aware chevron icons"
      contains: "colors.foreground"
    - path: "packages/registry/ui/tag-input.tsx"
      provides: "Theme-aware close icon + platformShadow"
      contains: "colors.foreground"
  key_links:
    - from: "ChevronLeftIcon/ChevronRightIcon/CloseIcon"
      to: "useTheme()"
      via: "const { colors } = useTheme()"
      pattern: "const finalColor = color \\?\\? colors\\.foreground"
---

<objective>
Fix icon color defaults and tag-input shadow in packages/registry/ui/ â€” the actual component library users consume.

Purpose: Gaps from VERIFICATION.md show these fixes were applied to packages/mcp-server/registry/ (reference copy) instead of packages/registry/ (actual library). Dark mode icons currently invisible.

Output: 3 UI components with theme-aware icon colors and shadows.
</objective>

<execution_context>
@/Users/johanneschristler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/johanneschristler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/19-critical-color-api-fixes/19-VERIFICATION.md

# Reference implementation (correct patterns)
@packages/mcp-server/registry/ui/calendar.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix icon color defaults (calendar, pagination, tag-input)</name>
  <files>
    packages/registry/ui/calendar.tsx
    packages/registry/ui/pagination.tsx
    packages/registry/ui/tag-input.tsx
  </files>
  <action>
For each icon function (ChevronLeftIcon, ChevronRightIcon, CloseIcon), apply this transformation:

BEFORE:
```tsx
function ChevronLeftIcon({ size = 20, color = '#000' }: { size?: number; color?: string }) {
  return (
    <Svg ... stroke={color} ...>
```

AFTER:
```tsx
function ChevronLeftIcon({ size = 20, color }: { size?: number; color?: string }) {
  const { colors } = useTheme();
  const finalColor = color ?? colors.foreground;
  return (
    <Svg ... stroke={finalColor} ...>
```

Files and icons to fix:
- calendar.tsx: ChevronLeftIcon (line 53), ChevronRightIcon (line 61)
- pagination.tsx: ChevronLeftIcon (line 56), ChevronRightIcon (line 64)
- tag-input.tsx: CloseIcon (line 53)

Note: useTheme is already imported in all these files.
  </action>
  <verify>
Run: `grep -n "color = '#000'" packages/registry/ui/calendar.tsx packages/registry/ui/pagination.tsx packages/registry/ui/tag-input.tsx`
Expected: No matches (empty output)

Run: `grep -c "colors.foreground" packages/registry/ui/calendar.tsx packages/registry/ui/pagination.tsx packages/registry/ui/tag-input.tsx`
Expected: Each file shows count > 0
  </verify>
  <done>5 icon functions use theme-aware colors.foreground fallback instead of hardcoded #000</done>
</task>

<task type="auto">
  <name>Task 2: Fix tag-input shadow implementation</name>
  <files>packages/registry/ui/tag-input.tsx</files>
  <action>
In tag-input.tsx, find the suggestions shadow (around line 436) and replace the hardcoded shadow object with platformShadow().

BEFORE (approximately):
```tsx
shadowColor: '#000',
shadowOffset: { width: 0, height: 2 },
shadowOpacity: 0.1,
shadowRadius: 4,
elevation: 3,
```

AFTER:
```tsx
...platformShadow('md'),
```

Steps:
1. Ensure platformShadow is destructured from useTheme(): `const { colors, ..., platformShadow } = useTheme();`
2. Find the shadow style (in StyleSheet.create or inline style)
3. Replace the 5-property shadow object with spread: `...platformShadow('md')`

Use 'md' size for suggestions dropdown (matches the elevation: 3 original).
  </action>
  <verify>
Run: `grep -n "shadowColor: '#000'" packages/registry/ui/tag-input.tsx`
Expected: No matches

Run: `grep -n "platformShadow" packages/registry/ui/tag-input.tsx`
Expected: At least 1 match showing platformShadow usage
  </verify>
  <done>Tag-input suggestions use platformShadow('md') for theme-aware shadows</done>
</task>

</tasks>

<verification>
```bash
# Verify no hardcoded icon colors remain
grep -rn "color = '#000'" packages/registry/ui/calendar.tsx packages/registry/ui/pagination.tsx packages/registry/ui/tag-input.tsx
# Expected: empty

# Verify theme colors used
grep -c "colors.foreground" packages/registry/ui/calendar.tsx packages/registry/ui/pagination.tsx packages/registry/ui/tag-input.tsx
# Expected: counts > 0 for each file

# Verify no hardcoded shadow in tag-input
grep -n "shadowColor: '#000'" packages/registry/ui/tag-input.tsx
# Expected: empty

# TypeScript check
cd packages/registry && npx tsc --noEmit
# Expected: no errors in modified files
```
</verification>

<success_criteria>
1. grep for `color = '#000'` in calendar, pagination, tag-input returns empty
2. grep for `colors.foreground` shows usage in all 3 files
3. grep for `shadowColor: '#000'` in tag-input returns empty
4. TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/19-critical-color-api-fixes/19-06-SUMMARY.md`
</output>
