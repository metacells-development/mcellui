---
phase: 19-critical-color-api-fixes
plan: 08
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/registry/ui/tabs.tsx
  - packages/registry/ui/slider.tsx
  - packages/registry/ui/popover.tsx
  - packages/registry/ui/tooltip.tsx
  - packages/registry/ui/segmented-control.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "All shadow implementations use platformShadow() helper instead of hardcoded shadowColor: '#000'"
    - "Shadows adapt to theme and platform automatically"
  artifacts:
    - path: "packages/registry/ui/tabs.tsx"
      provides: "Theme-aware indicator shadow"
      contains: "platformShadow"
    - path: "packages/registry/ui/slider.tsx"
      provides: "Theme-aware thumb shadow"
      contains: "platformShadow"
    - path: "packages/registry/ui/popover.tsx"
      provides: "Theme-aware content shadow"
      contains: "platformShadow"
    - path: "packages/registry/ui/tooltip.tsx"
      provides: "Theme-aware container shadow"
      contains: "platformShadow"
    - path: "packages/registry/ui/segmented-control.tsx"
      provides: "Theme-aware indicator shadow"
      contains: "platformShadow"
  key_links:
    - from: "shadow styles"
      to: "useTheme()"
      via: "platformShadow helper destructuring"
      pattern: "const \\{.*platformShadow.*\\} = useTheme\\(\\)"
---

<objective>
Migrate 5 UI components from hardcoded shadow objects to platformShadow() helper in packages/registry/ui/.

Purpose: Gaps from VERIFICATION.md show 5 components (excluding tag-input handled in plan 06) use custom shadowColor: '#000' which doesn't adapt to dark mode or platform conventions.

Output: 5 UI components with theme-aware, platform-adaptive shadows.
</objective>

<execution_context>
@/Users/johanneschristler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/johanneschristler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/19-critical-color-api-fixes/19-VERIFICATION.md

# Reference implementation (correct patterns)
@packages/mcp-server/registry/ui/tabs.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate tabs.tsx and slider.tsx shadows</name>
  <files>
    packages/registry/ui/tabs.tsx
    packages/registry/ui/slider.tsx
  </files>
  <action>
For each component, perform this transformation:

**tabs.tsx** (line 342 - indicatorPill):
1. Add platformShadow to useTheme destructuring: `const { colors, componentRadius, platformShadow } = useTheme();`
2. In the component (not StyleSheet.create), apply shadow inline:

BEFORE (in styles):
```tsx
indicatorPill: {
  ...
  shadowColor: '#000',
  shadowOffset: { width: 0, height: 1 },
  shadowOpacity: 0.05,
  shadowRadius: 2,
  elevation: 1,
},
```

AFTER (remove shadow from styles, add inline):
```tsx
// In component render:
<Animated.View style={[styles.indicatorPill, { backgroundColor: colors.background, borderRadius: componentRadius('md'), ...platformShadow('sm') }, animatedIndicatorStyle]} />
```

**slider.tsx** (line 299 - thumb shadow):
1. Add platformShadow to useTheme destructuring
2. Apply shadow inline on thumb View:

BEFORE (in styles):
```tsx
thumb: {
  ...
  shadowColor: '#000',
  shadowOffset: { width: 0, height: 2 },
  shadowOpacity: 0.15,
  shadowRadius: 3,
  elevation: 3,
},
```

AFTER (remove shadow props from styles, add inline):
```tsx
<Animated.View style={[styles.thumb, { backgroundColor: colors.background, ...platformShadow('sm') }, thumbAnimatedStyle]} />
```

Use 'sm' for subtle shadows (original had low opacity/small radius).
  </action>
  <verify>
Run: `grep -n "shadowColor: '#000'" packages/registry/ui/tabs.tsx packages/registry/ui/slider.tsx`
Expected: No matches

Run: `grep -n "platformShadow" packages/registry/ui/tabs.tsx packages/registry/ui/slider.tsx`
Expected: At least 1 match per file
  </verify>
  <done>tabs.tsx and slider.tsx use platformShadow() for theme-aware shadows</done>
</task>

<task type="auto">
  <name>Task 2: Migrate popover.tsx, tooltip.tsx, segmented-control.tsx shadows</name>
  <files>
    packages/registry/ui/popover.tsx
    packages/registry/ui/tooltip.tsx
    packages/registry/ui/segmented-control.tsx
  </files>
  <action>
Apply same transformation pattern to remaining 3 components:

**popover.tsx** (line 299 - content shadow):
1. Add platformShadow to useTheme destructuring
2. Replace inline shadow object with ...platformShadow('md')

Look for pattern like:
```tsx
{
  shadowColor: '#000',
  shadowOffset: { width: 0, height: 4 },
  ...
}
```
Replace with: `...platformShadow('md')`

**tooltip.tsx** (line 342 - container shadow):
1. Add platformShadow to useTheme destructuring
2. Replace shadow object with ...platformShadow('sm')

**segmented-control.tsx** (line 213 - indicator shadow):
1. Add platformShadow to useTheme destructuring
2. Replace shadow object with ...platformShadow('sm')

Size guide:
- 'sm': subtle shadow (elevation 1-2, low opacity)
- 'md': medium shadow (elevation 3-4, moderate opacity)
- Use 'md' for popovers (floating above content), 'sm' for inline indicators
  </action>
  <verify>
Run: `grep -n "shadowColor: '#000'" packages/registry/ui/popover.tsx packages/registry/ui/tooltip.tsx packages/registry/ui/segmented-control.tsx`
Expected: No matches

Run: `grep -n "platformShadow" packages/registry/ui/popover.tsx packages/registry/ui/tooltip.tsx packages/registry/ui/segmented-control.tsx`
Expected: At least 1 match per file
  </verify>
  <done>popover.tsx, tooltip.tsx, segmented-control.tsx use platformShadow() for theme-aware shadows</done>
</task>

</tasks>

<verification>
```bash
# Verify no hardcoded shadows remain
grep -rn "shadowColor: '#000'" packages/registry/ui/tabs.tsx packages/registry/ui/slider.tsx packages/registry/ui/popover.tsx packages/registry/ui/tooltip.tsx packages/registry/ui/segmented-control.tsx
# Expected: empty

# Verify platformShadow used
grep -c "platformShadow" packages/registry/ui/tabs.tsx packages/registry/ui/slider.tsx packages/registry/ui/popover.tsx packages/registry/ui/tooltip.tsx packages/registry/ui/segmented-control.tsx
# Expected: counts > 0 for each file

# TypeScript check
cd packages/registry && npx tsc --noEmit
# Expected: no errors in modified files
```
</verification>

<success_criteria>
1. grep for `shadowColor: '#000'` in all 5 files returns empty
2. grep for `platformShadow` shows usage in all 5 files
3. TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/19-critical-color-api-fixes/19-08-SUMMARY.md`
</output>
