---
phase: 01-form-inputs
plan: 04
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - packages/registry/ui/tag-input.tsx
autonomous: true

must_haves:
  truths:
    - "TagInput uses centralized tokens from components.tagInput[size]"
    - "TagInput uses componentRadius.tagInput for border radius"
    - "No local SIZE_CONFIG remains in the file"
  artifacts:
    - path: "packages/registry/ui/tag-input.tsx"
      provides: "Token-based TagInput"
      contains: "components.tagInput"
  key_links:
    - from: "packages/registry/ui/tag-input.tsx"
      to: "packages/core/src/theme/components.ts"
      via: "useTheme().components.tagInput"
      pattern: "components\\.tagInput\\[size\\]"
---

<objective>
Migrate TagInput from local SIZE_CONFIG to centralized design tokens.

Purpose: TagInput currently defines its own SIZE_CONFIG object with hardcoded values. Centralizing ensures consistency and enables global theme customization.

Output: TagInput using components.ts tokens with no local size definitions.
</objective>

<execution_context>
@/Users/johanneschristler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/johanneschristler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/01-form-inputs/01-RESEARCH.md
@.planning/phases/01-form-inputs/01-01-SUMMARY.md

# Reference files
@packages/registry/ui/tag-input.tsx
@packages/registry/ui/input.tsx (gold standard)
@packages/core/src/theme/components.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate TagInput to centralized tokens</name>
  <files>packages/registry/ui/tag-input.tsx</files>
  <action>
Replace local SIZE_CONFIG with centralized tokens from components.tagInput[size].

1. Remove local SIZE_CONFIG:
```typescript
// DELETE this entire block:
const SIZE_CONFIG = {
  sm: { ... },
  md: { ... },
  lg: { ... },
};
```

2. Update TagInput component to use centralized tokens:
```typescript
export function TagInput({
  size = 'md',
  // ... other props
}: TagInputProps) {
  const { colors, components, componentRadius, spacing } = useTheme();
  const tokens = components.tagInput[size];
```

3. Replace SIZE_CONFIG references in main component:
- `const config = SIZE_CONFIG[size];` -> remove, use `tokens` directly
- `config.tagHeight` -> `tokens.tagHeight`
- `config.tagFontSize` -> `tokens.tagFontSize`
- `config.inputFontSize` -> `tokens.inputFontSize`
- `config.padding` -> `tokens.padding`
- `config.gap` -> `tokens.gap`

4. Update container styles:
```typescript
<Pressable
  onPress={handleContainerPress}
  style={[
    styles.container,
    {
      borderWidth: 1,
      borderColor: displayError ? colors.destructive : colors.border,
      borderRadius: componentRadius.tagInput,
      padding: tokens.padding,
      gap: tokens.gap,
      backgroundColor: disabled ? colors.secondary : colors.background,
      opacity: disabled ? 0.6 : 1,
      minHeight: tokens.minHeight,
    },
  ]}
>
```

5. Update label styles:
```typescript
{label && (
  <Text style={[
    styles.label,
    {
      fontSize: tokens.labelFontSize,
      color: colors.foreground,
      marginBottom: spacing[1]
    }
  ]}>
    {label}
  </Text>
)}
```

6. Update helper text styles:
```typescript
{(helperText || displayError) && (
  <Text
    style={[
      styles.helperText,
      {
        fontSize: tokens.helperFontSize,
        color: displayError ? colors.destructive : colors.foregroundMuted,
        marginTop: spacing[1],
      },
    ]}
  >
    {displayError || helperText}
  </Text>
)}
```

7. Update Tag component to receive tokens instead of using SIZE_CONFIG:
```typescript
function Tag({
  label,
  onRemove,
  tokens,  // Pass tokens instead of size
  disabled,
}: {
  label: string;
  onRemove: () => void;
  tokens: typeof components.tagInput['md'];  // Add proper type
  disabled?: boolean;
}) {
  const { colors, radius, spacing } = useTheme();

  // Use tokens.tagHeight, tokens.tagFontSize
```

Or simpler approach - pass size and let Tag component get tokens:
```typescript
function Tag({
  label,
  onRemove,
  size,
  disabled,
}: {
  label: string;
  onRemove: () => void;
  size: TagInputSize;
  disabled?: boolean;
}) {
  const { colors, components, spacing } = useTheme();
  const tokens = components.tagInput[size];

  return (
    <AnimatedView
      // ...
      style={[
        animatedStyle,
        styles.tag,
        {
          height: tokens.tagHeight,
          backgroundColor: colors.secondary,
          borderRadius: radius.full,
          paddingHorizontal: spacing[2],
          gap: spacing[1],
        },
      ]}
    >
      <Text
        style={[
          styles.tagText,
          {
            fontSize: tokens.tagFontSize,
            color: colors.foreground,
          },
        ]}
        numberOfLines={1}
      >
        {label}
      </Text>
      // ...
```

8. Update SuggestionItem similarly:
```typescript
function SuggestionItem({
  label,
  onPress,
  size,
}: {
  label: string;
  onPress: () => void;
  size: TagInputSize;
}) {
  const { colors, components, spacing } = useTheme();
  const tokens = components.tagInput[size];

  return (
    <Pressable
      onPress={onPress}
      style={({ pressed }) => [
        styles.suggestionItem,
        {
          paddingHorizontal: spacing[3],
          paddingVertical: spacing[2],
          backgroundColor: pressed ? colors.secondary : 'transparent',
        },
      ]}
    >
      <Text style={{ fontSize: tokens.inputFontSize, color: colors.foreground }}>
        {label}
      </Text>
    </Pressable>
  );
}
```

9. Update input TextInput styles:
```typescript
<TextInput
  // ...
  style={[
    styles.input,
    {
      fontSize: tokens.inputFontSize,
      color: colors.foreground,
      minWidth: value.length === 0 ? '100%' : 80,
    },
  ]}
  // ...
/>
```

10. Remove hardcoded fontSize: 14 from styles.label.
  </action>
  <verify>TypeScript compilation: `cd packages/registry && npx tsc --noEmit`</verify>
  <done>TagInput uses components.tagInput[size] tokens, no local SIZE_CONFIG remains</done>
</task>

</tasks>

<verification>
1. `cd packages/registry && npx tsc --noEmit` - TypeScript compiles without errors
2. `grep -n "SIZE_CONFIG" packages/registry/ui/tag-input.tsx` -> no matches
3. Component uses `components.tagInput[size]` pattern
</verification>

<success_criteria>
- TagInput uses components.tagInput[size] with no local SIZE_CONFIG
- Tag sub-component uses tokens for tagHeight, tagFontSize
- SuggestionItem uses tokens for inputFontSize
- Container uses componentRadius.tagInput
- TypeScript compilation succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/01-form-inputs/01-04-SUMMARY.md`
</output>
