---
phase: 01-form-inputs
plan: 03
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - packages/registry/ui/slider.tsx
  - packages/registry/ui/stepper.tsx
  - packages/registry/ui/radio-group.tsx
autonomous: true

must_haves:
  truths:
    - "Slider uses centralized tokens from components.slider[size]"
    - "Stepper uses centralized tokens from components.stepper[size]"
    - "Radio uses centralized tokens from components.radio[size]"
    - "All components use componentRadius from theme where applicable"
  artifacts:
    - path: "packages/registry/ui/slider.tsx"
      provides: "Token-based Slider"
      contains: "components.slider"
    - path: "packages/registry/ui/stepper.tsx"
      provides: "Token-based Stepper"
      contains: "components.stepper"
    - path: "packages/registry/ui/radio-group.tsx"
      provides: "Token-based RadioGroup"
      contains: "components.radio"
  key_links:
    - from: "packages/registry/ui/slider.tsx"
      to: "packages/core/src/theme/components.ts"
      via: "useTheme().components.slider"
      pattern: "components\\.slider\\[size\\]"
    - from: "packages/registry/ui/stepper.tsx"
      to: "packages/core/src/theme/components.ts"
      via: "useTheme().components.stepper"
      pattern: "components\\.stepper\\[size\\]"
    - from: "packages/registry/ui/radio-group.tsx"
      to: "packages/core/src/theme/components.ts"
      via: "useTheme().components.radio"
      pattern: "components\\.radio\\[size\\]"
---

<objective>
Migrate Slider, Stepper, and Radio from local token definitions to centralized design tokens.

Purpose: These components currently define their own size tokens locally (trackHeights, thumbSizes, sizeTokens, sizes, SIZE_CONFIG). Centralizing ensures consistency and enables global theme customization.

Output: All three components using components.ts tokens with no local size definitions.
</objective>

<execution_context>
@/Users/johanneschristler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/johanneschristler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/01-form-inputs/01-RESEARCH.md
@.planning/phases/01-form-inputs/01-01-SUMMARY.md

# Reference files
@packages/registry/ui/slider.tsx
@packages/registry/ui/stepper.tsx
@packages/registry/ui/radio-group.tsx
@packages/registry/ui/tag-input.tsx
@packages/registry/ui/checkbox.tsx (gold standard for token usage)
@packages/core/src/theme/components.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate Slider to centralized tokens</name>
  <files>packages/registry/ui/slider.tsx</files>
  <action>
Replace local token definitions with centralized tokens from components.slider[size].

1. Remove local token definitions:
```typescript
// DELETE these:
const trackHeights: Record<SliderSize, number> = { ... };
const thumbSizes: Record<SliderSize, number> = { ... };
```

2. Update component to use centralized tokens:
```typescript
export function Slider({
  size = 'md',
  // ... other props
}: SliderProps) {
  const { colors, components, spacing, springs } = useTheme();
  const tokens = components.slider[size];
```

3. Replace local token references:
- `const trackHeight = trackHeights[size];` -> `const trackHeight = tokens.trackHeight;`
- `const thumbSize = thumbSizes[size];` -> `const thumbSize = tokens.thumbSize;`

4. Replace hardcoded label styles with tokens:
```typescript
// Label
<Text
  style={[
    styles.label,
    {
      fontSize: tokens.labelFontSize,
      color: disabled ? colors.foregroundMuted : colors.foreground
    },
    labelStyle,
  ]}
>
```

```typescript
// Value display
<Text
  style={[
    styles.value,
    {
      fontSize: tokens.valueFontSize,
      color: disabled ? colors.foregroundMuted : colors.primary
    },
  ]}
>
```

5. Remove hardcoded fontSize: 14 from styles object:
```typescript
const styles = StyleSheet.create({
  // ...
  label: {
    // fontSize: 14,  <- REMOVE
    fontWeight: '500',
  },
  value: {
    // fontSize: 14,  <- REMOVE
    fontWeight: '600',
  },
```

6. Keep gesture handling, animation logic, and accessibility unchanged.
  </action>
  <verify>TypeScript compilation: `cd packages/registry && npx tsc --noEmit`</verify>
  <done>Slider uses components.slider[size] tokens, no local size definitions remain</done>
</task>

<task type="auto">
  <name>Task 2: Migrate Stepper to centralized tokens</name>
  <files>packages/registry/ui/stepper.tsx</files>
  <action>
Replace local sizeTokens with centralized tokens from components.stepper[size].

1. Remove local token definitions:
```typescript
// DELETE this:
const sizeTokens: Record<StepperSize, { ... }> = { ... };
```

2. Update component to use centralized tokens:
```typescript
export function Stepper({
  size = 'md',
  // ... other props
}: StepperProps) {
  const { colors, components, componentRadius, spacing, springs } = useTheme();
  const tokens = components.stepper[size];
```

3. Replace local token references:
- `const tokens = sizeTokens[size];` -> already done above
- `tokens.height` -> same
- `tokens.buttonWidth` -> same
- `tokens.fontSize` -> same
- `tokens.iconSize` -> same
- `tokens.valueWidth` -> same

4. Replace hardcoded label style with tokens:
```typescript
{label && (
  <Text
    style={[
      styles.label,
      {
        fontSize: tokens.labelFontSize,
        marginBottom: spacing[2],
        color: disabled ? colors.foregroundMuted : colors.foreground,
      },
      labelStyle,
    ]}
  >
    {label}
  </Text>
)}
```

5. Use componentRadius for border radius:
- `borderRadius: radius.md` -> `borderRadius: componentRadius.stepper`
- `borderTopLeftRadius: radius.md` -> `borderTopLeftRadius: componentRadius.stepper`
- etc.

6. Remove hardcoded fontSize: 14 from styles.label.
  </action>
  <verify>TypeScript compilation: `cd packages/registry && npx tsc --noEmit`</verify>
  <done>Stepper uses components.stepper[size] tokens, no local size definitions remain</done>
</task>

<task type="auto">
  <name>Task 3: Migrate Radio to centralized tokens</name>
  <files>packages/registry/ui/radio-group.tsx</files>
  <action>
Replace local sizes object with centralized tokens from components.radio[size].

1. Remove local size definitions:
```typescript
// DELETE this entire block:
const sizes = {
  sm: StyleSheet.create({ ... }),
  md: StyleSheet.create({ ... }),
  lg: StyleSheet.create({ ... }),
};
```

2. Update RadioGroupContext to include components:
```typescript
interface RadioGroupContextValue {
  value: string;
  onValueChange: (value: string) => void;
  disabled: boolean;
  size: 'sm' | 'md' | 'lg';
  colors: ThemeColors;
  springs: typeof themeSpringPresets;
  components: typeof import('@metacells/mcellui-core').components;  // Add
}
```

3. Update RadioGroup to pass components:
```typescript
export function RadioGroup({ ... }: RadioGroupProps) {
  const { colors, components, springs } = useTheme();

  return (
    <RadioGroupContext.Provider
      value={{ value, onValueChange, disabled, size, colors, springs, components }}
    >
```

4. Update RadioGroupItem to use centralized tokens:
```typescript
export function RadioGroupItem({ ... }: RadioGroupItemProps) {
  const context = useRadioGroup();
  const { colors, springs, components } = context;
  const tokens = components.radio[context.size];
```

5. Replace local style references with token-based inline styles:
```typescript
<Animated.View
  style={[
    styles.outer,
    {
      width: tokens.outerSize,
      height: tokens.outerSize,
      borderRadius: tokens.outerSize / 2,
      borderWidth: tokens.borderWidth,
    },
    outerAnimatedStyle,
    disabled && styles.disabled,
  ]}
>
  <Animated.View
    style={[
      styles.inner,
      {
        width: tokens.innerSize,
        height: tokens.innerSize,
        borderRadius: tokens.innerSize / 2,
        backgroundColor: colors.primary,
      },
      innerAnimatedStyle,
    ]}
  />
</Animated.View>

<View style={[styles.textContainer, { gap: tokens.gap }]}>
  <Text
    style={[
      styles.label,
      {
        fontSize: tokens.labelFontSize,
        color: disabled ? colors.foregroundMuted : colors.foreground
      },
    ]}
  >
    {label}
  </Text>
  {description && (
    <Text
      style={[
        styles.description,
        {
          fontSize: tokens.descriptionFontSize,
          color: colors.foregroundMuted
        },
      ]}
    >
      {description}
    </Text>
  )}
</View>
```

6. Simplify styles object (remove size-specific static styles, keep layout styles).
  </action>
  <verify>TypeScript compilation: `cd packages/registry && npx tsc --noEmit`</verify>
  <done>RadioGroup uses components.radio[size] tokens, no local size definitions remain</done>
</task>

</tasks>

<verification>
1. `cd packages/registry && npx tsc --noEmit` - TypeScript compiles without errors
2. Grep for local token definitions should return nothing:
   - `grep -n "trackHeights\|thumbSizes" packages/registry/ui/slider.tsx` -> no matches
   - `grep -n "sizeTokens" packages/registry/ui/stepper.tsx` -> no matches
   - `grep -n "const sizes =" packages/registry/ui/radio-group.tsx` -> no matches
3. All components use `components.{component}[size]` pattern
</verification>

<success_criteria>
- Slider uses components.slider[size] with no local trackHeights/thumbSizes
- Stepper uses components.stepper[size] with no local sizeTokens
- Radio uses components.radio[size] with no local sizes object
- All components get tokens from useTheme().components
- TypeScript compilation succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/01-form-inputs/01-03-SUMMARY.md`
</output>
