---
phase: 09-blocks-auth-settings
plan: 04
type: execute
wave: 2
depends_on: ["09-01"]
files_modified:
  - packages/registry/blocks/empty-state-block.tsx
  - packages/registry/blocks/error-state-block.tsx
autonomous: true

must_haves:
  truths:
    - "EmptyStateBlock uses stateBlockTokens for all typography and sizes (no hardcoded values)"
    - "ErrorStateBlock uses stateBlockTokens for all typography and sizes (no hardcoded values)"
    - "Both blocks maintain exact same visual appearance after migration"
  artifacts:
    - path: "packages/registry/blocks/empty-state-block.tsx"
      provides: "EmptyStateBlock with token-based typography and sizes"
      contains: "stateBlockTokens"
    - path: "packages/registry/blocks/error-state-block.tsx"
      provides: "ErrorStateBlock with token-based typography and sizes"
      contains: "stateBlockTokens"
  key_links:
    - from: "packages/registry/blocks/empty-state-block.tsx"
      to: "@metacells/mcellui-core"
      via: "import stateBlockTokens"
      pattern: "import.*stateBlockTokens.*from"
---

<objective>
Migrate EmptyStateBlock and ErrorStateBlock to use centralized stateBlockTokens for all typography and icon container sizes, eliminating hardcoded values.

Purpose: State blocks will use theme tokens for consistent typography and sizing, enabling theme customization and supporting compact/default variants cleanly.

Output: Updated EmptyStateBlock and ErrorStateBlock consuming stateBlockTokens from core
</objective>

<execution_context>
@/Users/johanneschristler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/johanneschristler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/09-blocks-auth-settings/09-01-SUMMARY.md
@packages/core/src/theme/components.ts
@packages/registry/blocks/empty-state-block.tsx
@packages/registry/blocks/error-state-block.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate EmptyStateBlock to stateBlockTokens</name>
  <files>packages/registry/blocks/empty-state-block.tsx</files>
  <action>
Update EmptyStateBlock to use stateBlockTokens from core instead of hardcoded typography and sizes.

1. Import stateBlockTokens:
```typescript
import { useTheme, stateBlockTokens } from '@metacells/mcellui-core';
```

2. Replace hardcoded values with token-based conditional values:

**Icon container size (line ~86-92):**
Replace:
```typescript
width: compact ? 64 : 80,
height: compact ? 64 : 80,
borderRadius: compact ? 32 : 40,
```
With:
```typescript
width: compact ? stateBlockTokens.compact.iconContainerSize : stateBlockTokens.default.iconContainerSize,
height: compact ? stateBlockTokens.compact.iconContainerSize : stateBlockTokens.default.iconContainerSize,
borderRadius: compact ? stateBlockTokens.compact.iconContainerRadius : stateBlockTokens.default.iconContainerRadius,
```

**Title (line ~104-108):**
Replace `fontSize: compact ? 18 : 20` with:
```typescript
fontSize: compact ? stateBlockTokens.compact.titleFontSize : stateBlockTokens.default.titleFontSize,
fontWeight: stateBlockTokens.typography.titleFontWeight,
```

**Description (line ~119-122):**
Replace `fontSize: compact ? 14 : 15` with:
```typescript
fontSize: compact ? stateBlockTokens.compact.descriptionFontSize : stateBlockTokens.default.descriptionFontSize,
```

3. Update the StyleSheet:
- Remove fontSize from styles.title (keep fontWeight if not moved to token)
- Remove fontSize from styles.description
- Keep structural styles (textAlign, lineHeight, flex, etc.)

Note: lineHeight: 22 in styles.description should remain as is since it's not in tokens.
  </action>
  <verify>
Run `npx tsc --noEmit` in packages/registry to verify no TypeScript errors.
Test both compact={true} and compact={false} variants render correctly.
  </verify>
  <done>
EmptyStateBlock uses stateBlockTokens for all typography and icon container sizes - no hardcoded values remain.
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate ErrorStateBlock to stateBlockTokens</name>
  <files>packages/registry/blocks/error-state-block.tsx</files>
  <action>
Update ErrorStateBlock to use stateBlockTokens from core instead of hardcoded typography and sizes.

1. Import stateBlockTokens:
```typescript
import { useTheme, stateBlockTokens } from '@metacells/mcellui-core';
```

2. Replace hardcoded values with token-based conditional values:

**Icon size (line ~113):**
Replace `const iconSize = compact ? 40 : 48;` with:
```typescript
const tokens = compact ? stateBlockTokens.compact : stateBlockTokens.default;
const errorTokens = stateBlockTokens.error;
const iconSize = compact ? 40 : 48; // Keep as is - this is the SVG icon size, not container
```

**Icon container size (line ~128-133):**
Replace:
```typescript
width: compact ? 72 : 88,
height: compact ? 72 : 88,
borderRadius: compact ? 36 : 44,
```
With:
```typescript
width: compact ? errorTokens.iconContainerSizeCompact : errorTokens.iconContainerSize,
height: compact ? errorTokens.iconContainerSizeCompact : errorTokens.iconContainerSize,
borderRadius: compact ? errorTokens.iconContainerRadiusCompact : errorTokens.iconContainerRadius,
```

**Title (line ~144-148):**
Replace `fontSize: compact ? 18 : 20` with:
```typescript
fontSize: compact ? stateBlockTokens.compact.titleFontSize : stateBlockTokens.default.titleFontSize,
fontWeight: stateBlockTokens.typography.titleFontWeight,
```

**Description (line ~158-162):**
Replace `fontSize: compact ? 14 : 15` with:
```typescript
fontSize: compact ? stateBlockTokens.compact.descriptionFontSize : stateBlockTokens.default.descriptionFontSize,
```

**Error code (line ~175, styles.errorCode):**
Replace `fontSize: 12` with:
```typescript
fontSize: errorTokens.codeFontSize,
```

3. Update the StyleSheet:
- Remove fontSize from styles.title, styles.description, styles.errorCode
- Keep structural styles and fontFamily: 'monospace' for error code
  </action>
  <verify>
Run `npx tsc --noEmit` in packages/registry to verify no TypeScript errors.
Test both compact={true} and compact={false} variants render correctly.
Test error code display with errorCode prop.
  </verify>
  <done>
ErrorStateBlock uses stateBlockTokens for all typography and icon container sizes - no hardcoded values remain.
  </done>
</task>

</tasks>

<verification>
1. TypeScript compilation passes for both files
2. Visual regression: EmptyStateBlock and ErrorStateBlock look identical before/after
3. Compact mode: Both blocks render correctly with compact={true}
4. No hardcoded sizes: grep for "fontSize: [0-9]" and "width: [0-9]" should return zero matches for these specific patterns
5. Token imports present: grep for "stateBlockTokens" in both files
</verification>

<success_criteria>
- EmptyStateBlock imports and uses stateBlockTokens for typography and icon sizes
- ErrorStateBlock imports and uses stateBlockTokens for typography and icon sizes
- No hardcoded fontSize or icon container size values remain
- Both compact and default variants work correctly
- Visual appearance is unchanged for all variants
- retryLoading prop still works on ErrorStateBlock
</success_criteria>

<output>
After completion, create `.planning/phases/09-blocks-auth-settings/09-04-SUMMARY.md`
</output>
