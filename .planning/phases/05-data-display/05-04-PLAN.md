---
phase: 05-data-display
plan: 04
type: execute
wave: 2
depends_on: ["05-01"]
files_modified:
  - packages/core/src/theme/typography.ts
  - packages/registry/ui/typography.tsx
  - packages/registry/ui/image.tsx
autonomous: true

must_haves:
  truths:
    - "Typography tokens include h5 and h6 presets"
    - "Typography component uses typography tokens for h5/h6 instead of hardcoded values"
    - "Image component uses componentRadius.image for default border radius"
  artifacts:
    - path: "packages/core/src/theme/typography.ts"
      provides: "h5, h6 typography presets"
      contains: "h5:"
    - path: "packages/registry/ui/typography.tsx"
      provides: "Typography component with h5/h6 token usage"
      contains: "typography.h5"
    - path: "packages/registry/ui/image.tsx"
      provides: "Image component with componentRadius.image"
      contains: "componentRadius.image"
  key_links:
    - from: "packages/registry/ui/typography.tsx"
      to: "typography presets"
      via: "token lookup"
      pattern: "case 'h5':.*return typography\\.h5"
---

<objective>
Add h5/h6 typography presets, migrate Typography component to use them, and migrate Image to use componentRadius.

Purpose: Complete the typography preset coverage by adding missing h5/h6 tokens, and ensure Image component follows the componentRadius pattern for consistency.

Output: Extended typography.ts with h5/h6, updated Typography component, and Image using componentRadius.image.
</objective>

<execution_context>
@/Users/johanneschristler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/johanneschristler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/05-data-display/05-RESEARCH.md
@.planning/phases/05-data-display/05-01-SUMMARY.md

@packages/core/src/theme/typography.ts
@packages/registry/ui/typography.tsx
@packages/registry/ui/image.tsx
@packages/core/src/theme/radius.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add h5 and h6 to typography presets</name>
  <files>packages/core/src/theme/typography.ts</files>
  <action>
1. Update the Typography interface to include h5 and h6:
```typescript
export interface Typography {
  display: TextStyle;
  h1: TextStyle;
  h2: TextStyle;
  h3: TextStyle;
  h4: TextStyle;
  h5: TextStyle;  // ADD THIS
  h6: TextStyle;  // ADD THIS
  bodyLg: TextStyle;
  // ... rest unchanged
}
```

2. Add h5 and h6 presets to createTypography function, after h4:
```typescript
h5: {
  fontFamily: fonts.heading,
  fontSize: fontSize.md,        // 16
  fontWeight: fontWeight.semibold,
  lineHeight: fontSize.md * lineHeight.snug,  // ~22
},

h6: {
  fontFamily: fonts.heading,
  fontSize: fontSize.base,      // 14
  fontWeight: fontWeight.semibold,
  lineHeight: fontSize.base * lineHeight.snug,  // ~19
},
```

These follow the existing heading pattern: heading font, semibold weight, snug line height, decreasing font sizes (h1=30, h2=24, h3=20, h4=18, h5=16, h6=14).
  </action>
  <verify>
Run `npx tsc --noEmit -p packages/core` - no type errors.
Grep for h5/h6: `grep -E "h5:|h6:" packages/core/src/theme/typography.ts`
  </verify>
  <done>
Typography interface and createTypography function include h5 and h6 presets with appropriate font settings.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update Typography component to use h5/h6 tokens</name>
  <files>packages/registry/ui/typography.tsx</files>
  <action>
1. Update the getVariantStyle switch statement to use typography tokens for h5/h6 instead of hardcoded values:

Replace:
```typescript
case 'h5':
  return {
    fontFamily: fonts.heading,
    fontSize: 16,
    fontWeight: '600',
    lineHeight: 22,
  };
case 'h6':
  return {
    fontFamily: fonts.heading,
    fontSize: 14,
    fontWeight: '600',
    lineHeight: 20,
  };
```

With:
```typescript
case 'h5':
  return typography.h5;
case 'h6':
  return typography.h6;
```

2. Update the TypographyVariant type - it may need adjustment since h5/h6 will now be in TypographyKey:
- If TypographyKey is updated in core to include h5/h6, remove 'h5' | 'h6' from the local union
- Check if the type still works correctly

The component is already set up correctly for this pattern - h1-h4 use `typography[variant]`, so h5/h6 should follow the same pattern once the tokens exist.
  </action>
  <verify>
Run `npx tsc --noEmit -p packages/registry` - no type errors.
Grep for hardcoded h5/h6: `grep -E "case 'h5'|case 'h6'" packages/registry/ui/typography.tsx` - should show returns to typography.h5/h6, not inline objects.
  </verify>
  <done>
Typography component uses typography.h5 and typography.h6 tokens instead of hardcoded styles; no inline fontSize/fontWeight for h5/h6.
  </done>
</task>

<task type="auto">
  <name>Task 3: Migrate Image to use componentRadius.image</name>
  <files>packages/registry/ui/image.tsx</files>
  <action>
1. Update useTheme destructuring to include componentRadius:
```typescript
const { colors, radius, componentRadius } = useTheme();
```

2. Replace `radius.md` with `componentRadius.image` in all occurrences:

In imageStyle:
```typescript
borderRadius: borderRadius ?? componentRadius.image,
```

In error state container:
```typescript
borderRadius: borderRadius ?? componentRadius.image,
```

In main container:
```typescript
borderRadius: borderRadius ?? componentRadius.image,
```

There are three places where `radius.md` is used as the fallback for borderRadius. All should use `componentRadius.image` instead for consistency with the component token pattern.

Note: The user can still override with a custom borderRadius via style prop, but the default now comes from componentRadius.
  </action>
  <verify>
Run `npx tsc --noEmit -p packages/registry` - no type errors.
Grep for componentRadius: `grep "componentRadius.image" packages/registry/ui/image.tsx`
Grep for radius.md: `grep "radius.md" packages/registry/ui/image.tsx` should find nothing.
  </verify>
  <done>
Image component uses componentRadius.image for default border radius instead of radius.md; no direct radius.md usage remains.
  </done>
</task>

</tasks>

<verification>
After all tasks:
1. `npx tsc --noEmit -p packages/core` passes without errors
2. `npx tsc --noEmit -p packages/registry` passes without errors
3. Typography interface and createTypography include h5/h6
4. Typography component uses typography.h5/h6 tokens
5. Image uses componentRadius.image
</verification>

<success_criteria>
- h5 preset: fontSize=16, fontWeight=semibold, snug lineHeight
- h6 preset: fontSize=14, fontWeight=semibold, snug lineHeight
- Typography component: case 'h5' returns typography.h5
- Typography component: case 'h6' returns typography.h6
- Image component: uses componentRadius.image for default borderRadius
- TypeScript compiles without errors in both packages
</success_criteria>

<output>
After completion, create `.planning/phases/05-data-display/05-04-SUMMARY.md`
</output>
