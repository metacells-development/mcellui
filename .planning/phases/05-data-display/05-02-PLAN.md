---
phase: 05-data-display
plan: 02
type: execute
wave: 2
depends_on: ["05-01"]
files_modified:
  - packages/registry/ui/chip.tsx
  - packages/registry/ui/label.tsx
autonomous: true

must_haves:
  truths:
    - "Chip component uses components.chip tokens instead of inline SIZE_CONFIG"
    - "Label component uses components.label tokens instead of inline sizeTokens"
    - "Both components use componentRadius for border radius"
  artifacts:
    - path: "packages/registry/ui/chip.tsx"
      provides: "Chip component with token-based sizing"
      contains: "components.chip"
    - path: "packages/registry/ui/label.tsx"
      provides: "Label component with token-based sizing"
      contains: "components.label"
  key_links:
    - from: "packages/registry/ui/chip.tsx"
      to: "useTheme()"
      via: "token lookup"
      pattern: "const tokens = components\\.chip\\[size\\]"
    - from: "packages/registry/ui/label.tsx"
      to: "useTheme()"
      via: "token lookup"
      pattern: "const tokens = components\\.label\\[size\\]"
---

<objective>
Migrate Chip and Label components to use centralized tokens from components.ts.

Purpose: Replace inline SIZE_CONFIG objects with theme token lookups so these components respect global theme settings and maintain consistency with other data display components.

Output: Chip and Label components consuming tokens via useTheme().components.
</objective>

<execution_context>
@/Users/johanneschristler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/johanneschristler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/05-data-display/05-RESEARCH.md
@.planning/phases/05-data-display/05-01-SUMMARY.md

@packages/registry/ui/chip.tsx
@packages/registry/ui/label.tsx
@packages/core/src/theme/components.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate Chip to centralized tokens</name>
  <files>packages/registry/ui/chip.tsx</files>
  <action>
1. Remove the inline SIZE_CONFIG object (lines ~118-140):
```typescript
// DELETE THIS:
const SIZE_CONFIG = {
  sm: { paddingHorizontal: 10, paddingVertical: 4, ... },
  ...
};
```

2. Update useTheme destructuring to include components and componentRadius:
```typescript
const { colors, fontWeight, components, componentRadius } = useTheme();
```

3. Replace `config` lookup with token lookup:
```typescript
const tokens = components.chip[size];
```

4. Update style references:
- `config.paddingHorizontal` -> `tokens.paddingHorizontal`
- `config.paddingVertical` -> `tokens.paddingVertical`
- `config.fontSize` -> `tokens.fontSize`
- `config.iconSize` -> `tokens.iconSize`
- `radius[config.radiusKey]` -> `componentRadius.chip`

5. Update icon sizing:
- Close icon size: `tokens.iconSize - 2` (keep existing behavior)
- Left icon size: `tokens.iconSize`

6. Verify fontWeight still comes from theme: `fontWeight.medium`

Note: The animation logic using springs/scale should remain unchanged. Only size/spacing values change to token lookups.
  </action>
  <verify>
Run `npx tsc --noEmit -p packages/registry` - no type errors.
Grep for token usage: `grep "components.chip" packages/registry/ui/chip.tsx`
Grep removed SIZE_CONFIG: `grep "SIZE_CONFIG" packages/registry/ui/chip.tsx` should find nothing.
  </verify>
  <done>
Chip component uses components.chip[size] tokens for all sizing, componentRadius.chip for border radius, no inline SIZE_CONFIG exists.
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate Label to centralized tokens</name>
  <files>packages/registry/ui/label.tsx</files>
  <action>
1. Remove the inline sizeTokens object (lines ~44-48):
```typescript
// DELETE THIS:
const sizeTokens: Record<LabelSize, { fontSize: number; lineHeight: number }> = {
  sm: { fontSize: 12, lineHeight: 16 },
  md: { fontSize: 14, lineHeight: 20 },
  lg: { fontSize: 16, lineHeight: 24 },
};
```

2. Update useTheme destructuring to include components:
```typescript
const { colors, components } = useTheme();
```

3. Replace token lookup:
```typescript
const tokens = components.label[size];
```

4. Update style references in the Text component:
- `tokens.fontSize` (same as before)
- `tokens.lineHeight` (same as before)
- For fontWeight: use `tokens.fontWeight` instead of hardcoded '500' in StyleSheet

5. Update the StyleSheet:
- Remove `fontWeight: '500'` from styles.label
- Apply fontWeight from tokens in the inline style

The component is small (~100 lines), so this is a minimal change. Just swap the local object for theme tokens.
  </action>
  <verify>
Run `npx tsc --noEmit -p packages/registry` - no type errors.
Grep for token usage: `grep "components.label" packages/registry/ui/label.tsx`
Grep removed sizeTokens: `grep "sizeTokens" packages/registry/ui/label.tsx` should find nothing.
  </verify>
  <done>
Label component uses components.label[size] tokens for fontSize, lineHeight, and fontWeight; no inline sizeTokens object exists.
  </done>
</task>

</tasks>

<verification>
After all tasks:
1. `npx tsc --noEmit -p packages/registry` passes without errors
2. Chip uses components.chip tokens - no SIZE_CONFIG
3. Label uses components.label tokens - no sizeTokens
4. Both compile and maintain existing behavior with token values
</verification>

<success_criteria>
- Chip component: `const tokens = components.chip[size]` pattern
- Chip uses componentRadius.chip for border radius
- No SIZE_CONFIG in chip.tsx
- Label component: `const tokens = components.label[size]` pattern
- No sizeTokens in label.tsx
- Both components maintain same visual appearance (token values match original hardcoded values)
</success_criteria>

<output>
After completion, create `.planning/phases/05-data-display/05-02-SUMMARY.md`
</output>
