---
phase: 02-buttons-actions
plan: 05
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - packages/registry/ui/action-sheet.tsx
autonomous: true

must_haves:
  truths:
    - "ActionSheet uses centralized tokens from components.actionSheet"
    - "ActionSheetItem uses tokens for height, fontSize, iconSize, gap"
    - "ActionSheet uses componentRadius.actionSheet for container radius"
    - "ActionSheet header and cancel button use tokens for consistent sizing"
  artifacts:
    - path: "packages/registry/ui/action-sheet.tsx"
      provides: "Token-based ActionSheet component"
      contains: "components.actionSheet"
  key_links:
    - from: "packages/registry/ui/action-sheet.tsx"
      to: "@metacells/mcellui-core"
      via: "import useTheme"
      pattern: "components.actionSheet"
---

<objective>
Migrate ActionSheet and ActionSheetItem to use centralized tokens for consistent sizing and styling.

Purpose: Ensure ActionSheet follows the same token-based approach as other button-like components
Output: Refactored ActionSheet using components.actionSheet tokens, componentRadius
</objective>

<execution_context>
@/Users/johanneschristler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/johanneschristler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/02-buttons-actions/02-RESEARCH.md
@.planning/phases/02-buttons-actions/02-01-SUMMARY.md
@packages/registry/ui/action-sheet.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate ActionSheet to use centralized tokens</name>
  <files>packages/registry/ui/action-sheet.tsx</files>
  <action>
Refactor ActionSheet and ActionSheetItem to use centralized tokens:

1. **Update useTheme destructuring in ActionSheet** - Include components and componentRadius:
```typescript
const { colors, components, componentRadius, platformShadow } = useTheme();
const tokens = components.actionSheet;
```

2. **Update sheet container borderRadius**:
```typescript
// OLD: borderRadius: 16 or radius.xl
// NEW:
borderRadius: componentRadius.actionSheet,
```

3. **Update header section to use tokens** (if ActionSheet has title prop):
```typescript
{title && (
  <View style={[styles.header, { paddingVertical: tokens.header.paddingVertical, paddingHorizontal: tokens.header.paddingHorizontal }]}>
    <Text style={[styles.headerTitle, { fontSize: tokens.header.fontSize, fontWeight: tokens.header.fontWeight }]}>
      {title}
    </Text>
  </View>
)}
```

4. **Update cancel button to use tokens**:
```typescript
<Pressable
  style={[
    styles.cancelButton,
    {
      height: tokens.cancel.height,
      backgroundColor: colors.background,
      borderRadius: componentRadius.actionSheet,
    },
  ]}
  onPress={close}
>
  <Text style={[styles.cancelText, { fontSize: tokens.cancel.fontSize, fontWeight: tokens.cancel.fontWeight }]}>
    {cancelText || 'Cancel'}
  </Text>
</Pressable>
```

5. **Update ActionSheetItem component** to use tokens:
```typescript
// In ActionSheetItem component
const { colors, components, componentRadius } = useTheme();
const tokens = components.actionSheet.item;

// Update item container:
<Pressable
  style={[
    styles.item,
    {
      minHeight: tokens.height,
      paddingHorizontal: tokens.paddingHorizontal,
      gap: tokens.gap,
    },
    pressed && { backgroundColor: colors.backgroundMuted, borderRadius: componentRadius.actionSheetItem },
  ]}
  onPress={onPress}
  disabled={disabled}
>
  {icon && React.cloneElement(icon, {
    width: tokens.iconSize,
    height: tokens.iconSize,
    color: destructive ? colors.destructive : colors.foreground,
  })}
  <Text
    style={[
      styles.itemText,
      {
        fontSize: tokens.fontSize,
        fontWeight: tokens.fontWeight,
        color: destructive ? colors.destructive : disabled ? colors.foregroundMuted : colors.foreground,
      },
    ]}
  >
    {children}
  </Text>
</Pressable>
```

6. **Remove hardcoded values** - Delete any inline fontSize: 16, height: 48, paddingHorizontal: 16, etc.
  </action>
  <verify>
1. `npx tsc --noEmit -p packages/registry/tsconfig.json` passes
2. Start demo app and verify ActionSheet demo works: sheet opens with correct border radius, items have correct spacing, cancel button sized properly
  </verify>
  <done>ActionSheet and ActionSheetItem use centralized tokens from components.actionSheet and componentRadius</done>
</task>

</tasks>

<verification>
1. TypeScript compiles: `npx tsc --noEmit -p packages/registry/tsconfig.json`
2. Demo verification: ActionSheet opens with proper styling
3. Item states: Normal, disabled, destructive items all display correctly
4. Gesture: Swipe-to-dismiss still works (gesture code unchanged)
</verification>

<success_criteria>
- [ ] ActionSheet uses components.actionSheet tokens
- [ ] ActionSheet uses componentRadius.actionSheet for container
- [ ] ActionSheetItem uses tokens.item for height, fontSize, iconSize, gap
- [ ] Header uses tokens.header for styling
- [ ] Cancel button uses tokens.cancel for styling
- [ ] Hardcoded pixel values removed
- [ ] TypeScript compilation passes
- [ ] Visual output unchanged (same sizes, same visual appearance)
</success_criteria>

<output>
After completion, create `.planning/phases/02-buttons-actions/02-05-SUMMARY.md`
</output>
