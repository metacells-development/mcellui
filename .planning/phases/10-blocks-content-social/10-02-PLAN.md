# Plan 10-02: Card Blocks Visual Consistency

```yaml
phase: 10-blocks-content-social
plan: 02
type: execute
wave: 2
depends_on:
  - 10-01
files_modified:
  - packages/registry/blocks/product-card.tsx
  - packages/registry/blocks/article-card.tsx
  - packages/registry/blocks/event-card.tsx
  - packages/registry/blocks/review-card.tsx
autonomous: true

must_haves:
  truths:
    - "All card blocks use unified shadow depth from cardBlockTokens"
    - "Typography in all cards uses tokens instead of hardcoded values"
    - "Padding is consistent across all card blocks"
  artifacts:
    - path: "packages/registry/blocks/product-card.tsx"
      provides: "ProductCard with token-based styling"
      contains: "cardBlockTokens"
    - path: "packages/registry/blocks/article-card.tsx"
      provides: "ArticleCard with token-based styling"
      contains: "cardBlockTokens"
    - path: "packages/registry/blocks/event-card.tsx"
      provides: "EventCard with token-based styling"
      contains: "cardBlockTokens"
    - path: "packages/registry/blocks/review-card.tsx"
      provides: "ReviewCard with token-based styling"
      contains: "cardBlockTokens"
  key_links:
    - from: "packages/registry/blocks/*-card.tsx"
      to: "packages/core/src/theme/components.ts"
      via: "import cardBlockTokens"
      pattern: "import.*cardBlockTokens"
```

<objective>
Migrate all 4 card blocks (ProductCard, ArticleCard, EventCard, ReviewCard) to use cardBlockTokens for unified visual patterns.

Purpose: Ensure consistent shadows, typography, and padding across all card blocks.
Output: All card blocks using token-based styling with no hardcoded pixel values.
</objective>

<execution_context>
@/Users/johanneschristler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/johanneschristler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-blocks-content-social/10-RESEARCH.md
@.planning/phases/10-blocks-content-social/10-01-SUMMARY.md
@packages/registry/blocks/product-card.tsx
@packages/registry/blocks/article-card.tsx
@packages/registry/blocks/event-card.tsx
@packages/registry/blocks/review-card.tsx
</context>

<tasks>

<task type="auto">
  <name>Migrate ProductCard to cardBlockTokens</name>
  <files>packages/registry/blocks/product-card.tsx</files>
  <action>
1. Read packages/registry/blocks/product-card.tsx
2. Import cardBlockTokens and ecommerceBlockTokens: `import { cardBlockTokens, ecommerceBlockTokens } from '@metacells/mcellui-core'`
3. Replace hardcoded values:
   - Shadow: Add `platformShadow(cardBlockTokens.shadow)` to container style
   - Typography title: Replace hardcoded fontSize with `cardBlockTokens.typography.titleFontSize`
   - Typography price: Replace hardcoded fontSize with `cardBlockTokens.typography.priceFontSize`
   - Padding: Use `cardBlockTokens.content.paddingHorizontal` and `cardBlockTokens.content.paddingVertical`
   - Badge position: Use `ecommerceBlockTokens.product.badgePosition`
   - Wishlist position: Use `ecommerceBlockTokens.product.wishlistPosition`
4. Verify image aspect ratio uses `cardBlockTokens.image.productAspectRatio` (should be 1:1)
  </action>
  <verify>
cd /Users/johanneschristler/Code/metacells/other/mcellui
grep -n "cardBlockTokens\|ecommerceBlockTokens" packages/registry/blocks/product-card.tsx
npx tsc --noEmit -p packages/registry/tsconfig.json
  </verify>
  <done>
- ProductCard imports and uses cardBlockTokens and ecommerceBlockTokens
- Shadow uses platformShadow with cardBlockTokens.shadow
- Typography uses token values
- No hardcoded pixel values for shadows, typography, or spacing
  </done>
</task>

<task type="auto">
  <name>Migrate ArticleCard to cardBlockTokens</name>
  <files>packages/registry/blocks/article-card.tsx</files>
  <action>
1. Read packages/registry/blocks/article-card.tsx
2. Import cardBlockTokens: `import { cardBlockTokens } from '@metacells/mcellui-core'`
3. Replace hardcoded values in default variant:
   - Shadow: Add `platformShadow(cardBlockTokens.shadow)` to container
   - Typography: title fontSize -> `cardBlockTokens.typography.titleFontSize`
   - Typography: excerpt fontSize -> `cardBlockTokens.typography.subtitleFontSize`
   - Typography: meta (time, read time) -> `cardBlockTokens.typography.metaFontSize`
   - Padding: Use `cardBlockTokens.content.paddingHorizontal/paddingVertical`
4. Update horizontal variant with consistent sizing and padding
5. Update featured variant with proper typography tokens for overlay text
  </action>
  <verify>
cd /Users/johanneschristler/Code/metacells/other/mcellui
grep -n "cardBlockTokens" packages/registry/blocks/article-card.tsx
grep -n "fontSize\." packages/registry/blocks/article-card.tsx | head -10
npx tsc --noEmit -p packages/registry/tsconfig.json
  </verify>
  <done>
- ArticleCard imports and uses cardBlockTokens
- All three variants (default, horizontal, featured) use token-based typography
- Shadow uses platformShadow with cardBlockTokens.shadow
- Padding consistent with cardBlockTokens.content values
  </done>
</task>

<task type="auto">
  <name>Migrate EventCard to cardBlockTokens</name>
  <files>packages/registry/blocks/event-card.tsx</files>
  <action>
1. Read packages/registry/blocks/event-card.tsx
2. Import cardBlockTokens: `import { cardBlockTokens } from '@metacells/mcellui-core'`
3. Replace hardcoded values:
   - Shadow: Add `platformShadow(cardBlockTokens.shadow)` to container
   - Typography: event title -> `cardBlockTokens.typography.titleFontSize`
   - Typography: location, time -> `cardBlockTokens.typography.metaFontSize`
   - Padding: Use cardBlockTokens.content values
   - Color indicator bar: Ensure uses theme colors
4. Ensure attendees avatar section uses consistent spacing
  </action>
  <verify>
cd /Users/johanneschristler/Code/metacells/other/mcellui
grep -n "cardBlockTokens" packages/registry/blocks/event-card.tsx
npx tsc --noEmit -p packages/registry/tsconfig.json
  </verify>
  <done>
- EventCard imports and uses cardBlockTokens
- Shadow, typography, and padding use token values
- Attendees section uses consistent spacing
  </done>
</task>

<task type="auto">
  <name>Migrate ReviewCard to cardBlockTokens</name>
  <files>packages/registry/blocks/review-card.tsx</files>
  <action>
1. Read packages/registry/blocks/review-card.tsx
2. Import cardBlockTokens: `import { cardBlockTokens } from '@metacells/mcellui-core'`
3. Replace hardcoded values:
   - Container padding: Verify matches cardBlockTokens.content values
   - Typography: author name fontSize 14 -> `cardBlockTokens.typography.subtitleFontSize`
   - Typography: review title fontSize 15 -> `cardBlockTokens.typography.titleFontSize`
   - Typography: review content fontSize 14 -> `cardBlockTokens.typography.subtitleFontSize`
   - Typography: date fontSize 12 -> `cardBlockTokens.typography.metaFontSize`
   - Image container: Use cardBlockTokens.image.reviewAspectRatio
4. Ensure helpful button uses consistent touch target size (44px min)
  </action>
  <verify>
cd /Users/johanneschristler/Code/metacells/other/mcellui
grep -n "cardBlockTokens" packages/registry/blocks/review-card.tsx
grep -n "fontSize:" packages/registry/blocks/review-card.tsx
npx tsc --noEmit -p packages/registry/tsconfig.json
  </verify>
  <done>
- ReviewCard imports and uses cardBlockTokens
- All typography uses token values (no hardcoded 12, 14, 15 pixel values)
- Helpful button has minimum 44px touch target
  </done>
</task>

</tasks>

<verification>
```bash
cd /Users/johanneschristler/Code/metacells/other/mcellui

# Check all cards import cardBlockTokens
grep -l "cardBlockTokens" packages/registry/blocks/{product,article,event,review}-card.tsx

# Verify no hardcoded shadow values (should use platformShadow)
grep -n "shadowOffset\|elevation:" packages/registry/blocks/{product,article,event,review}-card.tsx

# Verify typography token usage
grep -n "fontSize\.\|fontWeight\." packages/registry/blocks/{product,article,event,review}-card.tsx | head -20

# TypeScript compilation
npx tsc --noEmit -p packages/registry/tsconfig.json
```
</verification>

<success_criteria>
- [ ] All 4 card blocks import and use cardBlockTokens
- [ ] Shadow depth is unified to 'sm' via cardBlockTokens.shadow
- [ ] Typography uses tokens: title (md/16), subtitle (base/14), meta (sm/13), price (lg/18)
- [ ] Padding uses cardBlockTokens.content.paddingHorizontal/paddingVertical
- [ ] No hardcoded pixel values for shadows, typography, or spacing remain
- [ ] TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/10-blocks-content-social/10-02-SUMMARY.md`
</output>
