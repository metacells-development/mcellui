---
phase: 20-spacing-typography-naming
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/mcp-server/registry/ui/input.tsx
  - packages/mcp-server/registry/ui/checkbox.tsx
  - packages/mcp-server/registry/ui/radio-group.tsx
  - packages/mcp-server/registry/ui/switch.tsx
  - packages/mcp-server/registry/ui/alert.tsx
  - packages/mcp-server/registry/ui/chip.tsx
  - packages/mcp-server/registry/ui/search-input.tsx
  - packages/mcp-server/registry/ui/section-header.tsx
autonomous: true

must_haves:
  truths:
    - "All padding/margin/gap values use spacing[n] tokens"
    - "No raw number values for spacing properties in registry/ui components"
    - "Components render identically after migration (no visual changes)"
  artifacts:
    - path: "packages/mcp-server/registry/ui/input.tsx"
      provides: "Token-based spacing"
      contains: "spacing["
    - path: "packages/mcp-server/registry/ui/alert.tsx"
      provides: "Token-based spacing"
      contains: "spacing["
    - path: "packages/mcp-server/registry/ui/chip.tsx"
      provides: "Token-based spacing"
      contains: "spacing["
  key_links:
    - from: "packages/mcp-server/registry/ui/*.tsx"
      to: "@metacells/mcellui-core"
      via: "spacing import from useTheme"
      pattern: "spacing\\["
---

<objective>
Migrate all hardcoded spacing values (padding, margin, gap) to theme tokens in registry UI components.

Purpose: Ensure all spacing respects the design token system so user-configured spacing presets work consistently. Addresses requirement TOK-06.
Output: 8 registry UI components using spacing[n] tokens instead of raw pixel values.
</objective>

<execution_context>
@/Users/johanneschristler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/johanneschristler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/20-spacing-typography-naming/20-CONTEXT.md
@.planning/phases/20-spacing-typography-naming/20-RESEARCH.md

@packages/core/src/theme/spacing.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate spacing in form components</name>
  <files>
    packages/mcp-server/registry/ui/input.tsx
    packages/mcp-server/registry/ui/checkbox.tsx
    packages/mcp-server/registry/ui/radio-group.tsx
    packages/mcp-server/registry/ui/switch.tsx
  </files>
  <action>
Replace hardcoded spacing values with spacing[n] tokens from useTheme().

Mapping (use exact token from packages/core/src/theme/spacing.ts):
- padding: 4 -> spacing[1] (4px)
- gap: 2 -> spacing[0.5] (2px)
- gap: 10 -> spacing[2.5] (10px)
- gap: 12 -> spacing[3] (12px)
- marginTop: 2 -> spacing[0.5] (2px)
- marginLeft: 8 -> spacing[2] (8px)

For each file:
1. Add `spacing` to destructured useTheme() if not already present
2. Replace inline style values: `{ marginLeft: 8 }` -> `{ marginLeft: spacing[2] }`
3. For StyleSheet values, apply inline as dynamic styles

Search each file for hardcoded spacing values in StyleSheet.create() blocks and inline styles. Use grep to find patterns like `padding: 4`, `gap: 2`, `marginTop: 2`, `marginLeft: 8` etc.

Per-file targets (search for these patterns):
- input.tsx: Find `padding: 4` in StyleSheet, replace with spacing[1]. Leave borderRadius (handled in Plan 02).
- checkbox.tsx: Find `gap: 2` in styles, replace with spacing[0.5].
- radio-group.tsx: Find `gap: 12` -> spacing[3], `gap: 10` -> spacing[2.5], `marginTop: 2` -> spacing[0.5].
- switch.tsx: Find `gap: 2` in styles, replace with spacing[0.5].

Do NOT change borderRadius, fontSize, or fontWeight values (handled in later plans).
  </action>
  <verify>
Run `npx tsc --noEmit` in packages/mcp-server to verify no type errors.
Grep for hardcoded spacing: `grep -n "padding: [0-9]\|margin: [0-9]\|gap: [0-9]" packages/mcp-server/registry/ui/{input,checkbox,radio-group,switch}.tsx` should return 0 results.
  </verify>
  <done>
- input.tsx uses spacing tokens for all padding/margin/gap
- checkbox.tsx uses spacing[0.5] for gap
- radio-group.tsx uses spacing[3], spacing[2.5], spacing[0.5] for gaps and margins
- switch.tsx uses spacing[0.5] for gap
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate spacing in display components</name>
  <files>
    packages/mcp-server/registry/ui/alert.tsx
    packages/mcp-server/registry/ui/chip.tsx
    packages/mcp-server/registry/ui/search-input.tsx
    packages/mcp-server/registry/ui/section-header.tsx
  </files>
  <action>
Replace hardcoded spacing values with spacing[n] tokens.

Mapping:
- marginTop: 2 -> spacing[0.5]
- gap: 4 -> spacing[1] (4px)
- padding: 4 -> spacing[1]
- marginRight: 6 -> spacing[1.5] (6px)
- marginLeft: 4 -> spacing[1]
- padding: 2 -> spacing[0.5]
- padding: 0, margin: 0 -> keep as 0 (explicit zero is fine)

Search each file for hardcoded spacing values in StyleSheet.create() and inline styles:

Per-file targets (search for these patterns):
- alert.tsx: Find `marginTop: 2` -> spacing[0.5], `gap: 4` -> spacing[1], `padding: 4` -> spacing[1].
- chip.tsx: Find `marginRight: 6` -> spacing[1.5], `marginLeft: 4` -> spacing[1], `padding: 2` -> spacing[0.5].
- search-input.tsx: Find `padding: 0` and `margin: 0` -> keep as 0 (explicit zeros are intentional resets, no change needed).
- section-header.tsx: Find `gap: 2` -> spacing[0.5].

For each file:
1. Add `spacing` to destructured useTheme() if not already present
2. Replace StyleSheet values with inline dynamic styles where needed
3. Keep explicit 0 values as-is (they're intentional resets)
  </action>
  <verify>
Run `npx tsc --noEmit` in packages/mcp-server.
Grep check: `grep -n "padding: [1-9]\|margin: [1-9]\|gap: [1-9]" packages/mcp-server/registry/ui/{alert,chip,section-header}.tsx` should return 0 results (note: excluding 0 values which are valid).
  </verify>
  <done>
- alert.tsx uses spacing tokens for marginTop, gap, padding
- chip.tsx uses spacing tokens for marginRight, marginLeft, padding
- search-input.tsx keeps explicit 0 values (intentional)
- section-header.tsx uses spacing[0.5] for gap
  </done>
</task>

</tasks>

<verification>
After completing all tasks:
1. `npx tsc --noEmit` passes in packages/mcp-server
2. `grep -rn "padding: [1-9]\|margin: [1-9]\|gap: [1-9]" packages/mcp-server/registry/ui/{input,checkbox,radio-group,switch,alert,chip,section-header}.tsx` returns empty (excluding search-input which has valid 0s)
3. Visual spot check: Build demo app, verify form components look identical
</verification>

<success_criteria>
- 8 files migrated to spacing tokens
- No hardcoded padding/margin/gap values (except explicit 0)
- TypeScript compilation passes
- No visual regressions
</success_criteria>

<output>
After completion, create `.planning/phases/20-spacing-typography-naming/20-01-SUMMARY.md`
</output>
