---
phase: 20-spacing-typography-naming
plan: 02
type: execute
wave: 2
depends_on: ["20-01"]
files_modified:
  - packages/mcp-server/registry/ui/input.tsx
  - packages/mcp-server/registry/ui/chip.tsx
  - packages/mcp-server/registry/ui/alert.tsx
  - packages/mcp-server/registry/ui/action-sheet.tsx
  - packages/mcp-server/registry/ui/image-gallery.tsx
  - packages/mcp-server/registry/ui/calendar.tsx
  - packages/mcp-server/registry/ui/datetime-picker.tsx
autonomous: true

must_haves:
  truths:
    - "All borderRadius values use radius.* or componentRadius.* tokens"
    - "No hardcoded borderRadius numbers in registry/ui components"
    - "User radius preset changes apply to all components"
  artifacts:
    - path: "packages/mcp-server/registry/ui/input.tsx"
      provides: "Token-based radius"
      contains: "radius."
    - path: "packages/mcp-server/registry/ui/chip.tsx"
      provides: "Token-based radius"
      contains: "radius."
    - path: "packages/mcp-server/registry/ui/calendar.tsx"
      provides: "Token-based radius"
      contains: "radius."
  key_links:
    - from: "packages/mcp-server/registry/ui/*.tsx"
      to: "packages/core/src/theme/radius.ts"
      via: "radius or componentRadius from useTheme"
      pattern: "radius\\.(none|xs|sm|md|lg)"
---

<objective>
Migrate all hardcoded borderRadius values to theme tokens in registry UI components.

Purpose: Ensure all border radii respect the global radius preset so users can shift their entire app from sharp to rounded. Addresses requirement TOK-07.
Output: 7 registry UI components using radius tokens instead of hardcoded pixel values.
</objective>

<execution_context>
@/Users/johanneschristler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/johanneschristler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/20-spacing-typography-naming/20-CONTEXT.md
@.planning/phases/20-spacing-typography-naming/20-RESEARCH.md

@packages/core/src/theme/radius.ts
@.planning/phases/20-spacing-typography-naming/20-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate radius in form and alert components</name>
  <files>
    packages/mcp-server/registry/ui/input.tsx
    packages/mcp-server/registry/ui/chip.tsx
    packages/mcp-server/registry/ui/alert.tsx
    packages/mcp-server/registry/ui/action-sheet.tsx
  </files>
  <action>
Replace hardcoded borderRadius values with radius tokens from useTheme().

Mapping (from packages/core/src/theme/radius.ts with md preset):
- borderRadius: 1 -> radius.none (or keep as 1 if intentional tiny radius)
- borderRadius: 2 -> radius.xs (2 when base=8)
- borderRadius: 4 -> radius.sm (4 when base=8)

The radius system uses createRadius() which scales from preset. With 'md' preset (base=8):
- radius.none = 0
- radius.xs = 2
- radius.sm = 4
- radius.md = 8
- radius.lg = 12

For very small radii (1, 1.5, 2), use radius.xs. For 4, use radius.sm.

Files and specific changes:
- input.tsx (line ~401): borderRadius: 4 -> radius.sm
- chip.tsx (line ~299): borderRadius: 4 -> radius.sm
- alert.tsx (line ~302): borderRadius: 4 -> radius.sm
- action-sheet.tsx (line ~376): borderRadius: 2 -> radius.xs

For each file:
1. Add `radius` to destructured useTheme() if not already present
2. Move borderRadius from StyleSheet to inline dynamic style
3. Apply as: style={[styles.foo, { borderRadius: radius.sm }]}

Important: StyleSheet.create() is evaluated at module load time. radius tokens must be applied inline.
  </action>
  <verify>
Run `npx tsc --noEmit` in packages/mcp-server.
Grep: `grep -n "borderRadius: [0-9]" packages/mcp-server/registry/ui/{input,chip,alert,action-sheet}.tsx` returns 0 results.
  </verify>
  <done>
- input.tsx uses radius.sm for icon button border radius
- chip.tsx uses radius.sm for chip close button
- alert.tsx uses radius.sm for action button
- action-sheet.tsx uses radius.xs for handle indicator
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate radius in calendar and date components</name>
  <files>
    packages/mcp-server/registry/ui/image-gallery.tsx
    packages/mcp-server/registry/ui/calendar.tsx
    packages/mcp-server/registry/ui/datetime-picker.tsx
  </files>
  <action>
Replace hardcoded borderRadius values with radius tokens.

Files and specific changes:
- image-gallery.tsx (line ~505): borderRadius: 1 -> Keep as 1 (too small for token, intentional subtle rounding)
- calendar.tsx (line ~551): borderRadius: 2 -> radius.xs
- datetime-picker.tsx (lines ~546, 577, 582, 590):
  - borderRadius: 2 -> radius.xs
  - borderRadius: 1 -> Keep as 1 (intentional minimal rounding)
  - borderRadius: 1.5 -> Keep as 1.5 (fractional, intentional)

Decision: Very small radii (1, 1.5) are intentional design details for subtle visual effects. Keep these as-is since they're smaller than the smallest token (radius.xs = 2). Only migrate values >= 2 to tokens.

For each file:
1. Add `radius` to destructured useTheme()
2. Replace borderRadius: 2 with radius.xs (dynamic inline style)
3. Keep borderRadius: 1 or 1.5 as-is (intentional sub-token values)
  </action>
  <verify>
Run `npx tsc --noEmit` in packages/mcp-server.
Check migrations:
- `grep -n "borderRadius: [2-9]" packages/mcp-server/registry/ui/{image-gallery,calendar,datetime-picker}.tsx` returns 0 results for values 2+
- Values of 1 and 1.5 are acceptable (intentional design details)
  </verify>
  <done>
- image-gallery.tsx keeps borderRadius: 1 (intentional)
- calendar.tsx uses radius.xs for indicators
- datetime-picker.tsx uses radius.xs for larger radii, keeps 1/1.5 for subtle details
  </done>
</task>

</tasks>

<verification>
After completing all tasks:
1. `npx tsc --noEmit` passes in packages/mcp-server
2. No borderRadius values >= 2 remain hardcoded (values 1 and 1.5 are acceptable)
3. Visual spot check: Calendar and datetime-picker components look identical
4. Change radius preset in demo ThemeProvider to 'lg', verify components become rounder
</verification>

<success_criteria>
- 7 files reviewed for radius migration
- All borderRadius >= 2 use radius tokens
- borderRadius 1 and 1.5 kept as intentional design details
- TypeScript compilation passes
- Radius preset changes affect all migrated components
</success_criteria>

<output>
After completion, create `.planning/phases/20-spacing-typography-naming/20-02-SUMMARY.md`
</output>
