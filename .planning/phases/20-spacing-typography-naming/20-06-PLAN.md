---
phase: 20-spacing-typography-naming
plan: 06
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/mcp-server/registry/ui/textarea.tsx
  - packages/mcp-server/registry/ui/select.tsx
  - packages/mcp-server/registry/ui/fab.tsx
  - packages/mcp-server/registry/ui/datetime-picker.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "All padding/margin values use spacing[n] tokens — no raw number values in styles"
  artifacts:
    - path: "packages/mcp-server/registry/ui/textarea.tsx"
      provides: "Token-based marginLeft in count style"
      contains: "spacing[2]"
    - path: "packages/mcp-server/registry/ui/select.tsx"
      provides: "Token-based marginLeft and marginTop"
      contains: "spacing[2]"
    - path: "packages/mcp-server/registry/ui/fab.tsx"
      provides: "Token-based marginLeft in label style"
      contains: "spacing[2]"
    - path: "packages/mcp-server/registry/ui/datetime-picker.tsx"
      provides: "Token-based marginBottom in calendarTop"
      contains: "spacing"
  key_links:
    - from: "packages/mcp-server/registry/ui/fab.tsx"
      to: "@metacells/mcellui-core"
      via: "spacing destructured from useTheme()"
      pattern: "spacing.*useTheme"
---

<objective>
Close 5 remaining hardcoded spacing values across 4 registry UI components.

Purpose: Complete TOK-06 requirement — all padding/margin values must use spacing[n] tokens so user-configurable spacing presets work globally.

Output: 4 updated component files with spacing tokens replacing hardcoded numeric margin values.

Note on borderRadius gaps (TOK-07): datetime-picker.tsx has borderRadius: 1 and borderRadius: 1.5. Per key decision from 20-02, "Sub-token borderRadius (1, 1.5) preserved as intentional design details." These are NOT gaps — they were deliberately preserved and require no changes.
</objective>

<execution_context>
@/Users/johanneschristler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/johanneschristler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/20-spacing-typography-naming/20-VERIFICATION.md
@.planning/phases/20-spacing-typography-naming/20-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate hardcoded marginLeft/marginTop to spacing tokens in textarea, select, and fab</name>
  <files>
    packages/mcp-server/registry/ui/textarea.tsx
    packages/mcp-server/registry/ui/select.tsx
    packages/mcp-server/registry/ui/fab.tsx
  </files>
  <action>
    These 3 components have hardcoded `marginLeft: 8` or `marginTop: 8` that must become `spacing[2]` (since spacing[2] = 8).

    **textarea.tsx** (already has `spacing` from useTheme):
    - Line 270 in StyleSheet: `marginLeft: 8` in `count` style
    - Since this is in a static StyleSheet, move `marginLeft` to an inline style where spacing is available
    - Find where `styles.count` is applied and add `{ marginLeft: spacing[2] }` as additional inline style
    - Remove `marginLeft: 8` from the StyleSheet `count` object

    **select.tsx** (already has `spacing` from useTheme):
    - Line 303 in StyleSheet: `marginLeft: 8` in `chevron` style
    - Line 308 in StyleSheet: `marginTop: 8` in `optionsList` style
    - Move both to inline styles where spacing is available
    - Find where `styles.chevron` and `styles.optionsList` are applied, add `{ marginLeft: spacing[2] }` and `{ marginTop: spacing[2] }` respectively
    - Remove the hardcoded values from StyleSheet

    **fab.tsx** (does NOT have `spacing` from useTheme):
    - Line 88: Add `spacing` to the useTheme() destructure: `const { colors, components, componentRadius, fontWeight, platformShadow, springs, spacing } = useTheme();`
    - Line 179: Replace `marginLeft: 8` with `marginLeft: spacing[2]` in the inline style object (already inline, just needs token)
  </action>
  <verify>
    Run: `grep -n "marginLeft: 8\|marginTop: 8" packages/mcp-server/registry/ui/textarea.tsx packages/mcp-server/registry/ui/select.tsx packages/mcp-server/registry/ui/fab.tsx`
    Expected: No matches (0 results)

    Run: `grep -n "spacing\[2\]" packages/mcp-server/registry/ui/textarea.tsx packages/mcp-server/registry/ui/select.tsx packages/mcp-server/registry/ui/fab.tsx`
    Expected: At least 4 matches (1 textarea + 2 select + 1 fab)
  </verify>
  <done>All 4 hardcoded margin values (8px) in textarea, select, and fab use spacing[2] token instead of raw numbers</done>
</task>

<task type="auto">
  <name>Task 2: Migrate hardcoded marginBottom in datetime-picker calendarTop</name>
  <files>
    packages/mcp-server/registry/ui/datetime-picker.tsx
  </files>
  <action>
    **datetime-picker.tsx** (already has `spacing` from useTheme):
    - Line 581 in StyleSheet: `marginBottom: 1` in `calendarTop` style
    - This is a micro-spacing value (1px) for the calendar icon decoration
    - The spacing scale includes `spacing[0.25]` which equals 1px — use that token
    - Move `marginBottom` from StyleSheet to inline style where spacing is accessible
    - Find where `styles.calendarTop` is applied and add `{ marginBottom: spacing[0.25] }` inline
    - Remove `marginBottom: 1` from the StyleSheet `calendarTop` object

    **DO NOT touch borderRadius values** (1 and 1.5) in calendarTop and calendarDot — these are intentionally preserved per 20-02 key decision.
  </action>
  <verify>
    Run: `grep -n "marginBottom: 1" packages/mcp-server/registry/ui/datetime-picker.tsx`
    Expected: No matches for exact `marginBottom: 1` (note: `marginBottom: spacing` matches are expected)

    Run: `grep -n "spacing\[0.25\]" packages/mcp-server/registry/ui/datetime-picker.tsx`
    Expected: At least 1 match for the calendarTop marginBottom
  </verify>
  <done>datetime-picker calendarTop marginBottom uses spacing[0.25] token; borderRadius 1 and 1.5 preserved as intentional micro-decorations</done>
</task>

</tasks>

<verification>
1. `grep -rn "marginLeft: 8\|marginTop: 8\|marginBottom: 1[^.]" packages/mcp-server/registry/ui/textarea.tsx packages/mcp-server/registry/ui/select.tsx packages/mcp-server/registry/ui/fab.tsx packages/mcp-server/registry/ui/datetime-picker.tsx` returns 0 results
2. `grep -rn "spacing\[" packages/mcp-server/registry/ui/textarea.tsx packages/mcp-server/registry/ui/select.tsx packages/mcp-server/registry/ui/fab.tsx packages/mcp-server/registry/ui/datetime-picker.tsx` shows new spacing token usages
3. borderRadius: 1 and borderRadius: 1.5 in datetime-picker.tsx remain unchanged (intentional)
</verification>

<success_criteria>
- All 5 hardcoded spacing values replaced with spacing tokens
- No new TypeScript errors introduced
- borderRadius micro-values preserved as intentional
- TOK-06 verification passes (no raw margin/padding numbers in registry/ui)
</success_criteria>

<output>
After completion, create `.planning/phases/20-spacing-typography-naming/20-06-SUMMARY.md`
</output>
