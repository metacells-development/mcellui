---
phase: 11-blocks-ecommerce-info
plan: 02
type: execute
wave: 2
depends_on: ["11-01"]
files_modified:
  - packages/registry/blocks/banner-block.tsx
  - packages/registry/blocks/hero-block.tsx
autonomous: true

must_haves:
  truths:
    - "BannerBlock uses ecommerceBlockTokens for typography and spacing"
    - "HeroBlock uses ecommerceBlockTokens for typography"
    - "No hardcoded font sizes in Banner or Hero blocks"
  artifacts:
    - path: "packages/registry/blocks/banner-block.tsx"
      provides: "Token-based BannerBlock"
      contains: "ecommerceBlockTokens"
    - path: "packages/registry/blocks/hero-block.tsx"
      provides: "Token-based HeroBlock"
      contains: "ecommerceBlockTokens"
  key_links:
    - from: "packages/registry/blocks/banner-block.tsx"
      to: "@metacells/mcellui-core"
      via: "ecommerceBlockTokens import"
      pattern: "ecommerceBlockTokens\\.banner"
---

<objective>
Migrate BannerBlock and HeroBlock to use centralized ecommerceBlockTokens instead of hardcoded SIZE_CONFIG and typography values.

Purpose: Replace hardcoded typography/spacing with centralized tokens so these promotional blocks are theme-consistent and customizable.

Output: Updated banner-block.tsx and hero-block.tsx using ecommerceBlockTokens from @metacells/mcellui-core.
</objective>

<execution_context>
@/Users/johanneschristler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/johanneschristler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/11-blocks-ecommerce-info/11-01-SUMMARY.md
@packages/registry/blocks/banner-block.tsx
@packages/registry/blocks/hero-block.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate BannerBlock to ecommerceBlockTokens</name>
  <files>packages/registry/blocks/banner-block.tsx</files>
  <action>
1. Add ecommerceBlockTokens to the import from @metacells/mcellui-core:
   ```typescript
   import { useTheme, ecommerceBlockTokens } from '@metacells/mcellui-core';
   ```

2. Remove the hardcoded SIZE_CONFIG constant (lines ~102-124):
   ```typescript
   // DELETE THIS:
   const SIZE_CONFIG = {
     sm: { padding: 12, titleSize: 14, ... },
     md: { padding: 16, titleSize: 16, ... },
     lg: { padding: 20, titleSize: 20, ... },
   };
   ```

3. In the component body, replace `SIZE_CONFIG[size]` with token access:
   ```typescript
   const tokens = ecommerceBlockTokens.banner[size];
   const sharedTokens = ecommerceBlockTokens.banner;
   ```

4. Update style references:
   - `config.padding` → `tokens.padding`
   - `config.titleSize` → `tokens.titleFontSize`
   - `config.subtitleSize` → `tokens.subtitleFontSize`
   - `config.iconSize` → `tokens.iconSize`
   - `config.minHeight` → `tokens.minHeight`

5. Update title style to use fontWeight token:
   ```typescript
   styles.title,
   {
     fontSize: tokens.titleFontSize,
     fontWeight: sharedTokens.titleFontWeight,
     color: txtColor
   },
   ```

6. Update subtitle lineHeight:
   ```typescript
   {
     fontSize: tokens.subtitleFontSize,
     color: txtColor,
     opacity: 0.9,
     marginTop: spacing[0.5],
     lineHeight: sharedTokens.subtitleLineHeight,
   },
   ```

7. Remove hardcoded fontWeight from styles object (it's now in tokens).
  </action>
  <verify>TypeScript compiles: `cd packages/registry && npx tsc --noEmit`</verify>
  <done>BannerBlock uses ecommerceBlockTokens.banner for all typography and spacing</done>
</task>

<task type="auto">
  <name>Task 2: Migrate HeroBlock to ecommerceBlockTokens</name>
  <files>packages/registry/blocks/hero-block.tsx</files>
  <action>
1. Add ecommerceBlockTokens to the import from @metacells/mcellui-core:
   ```typescript
   import { useTheme, ecommerceBlockTokens } from '@metacells/mcellui-core';
   ```

2. In the component body, access tokens:
   ```typescript
   const heroTokens = ecommerceBlockTokens.hero;
   ```

3. Update the height prop default to use token:
   - Keep `height = 400` as default but note it matches `heroTokens.defaultHeight`

4. Replace hardcoded styles in the StyleSheet:
   ```typescript
   title: {
     fontSize: heroTokens.titleFontSize,       // was 32
     fontWeight: heroTokens.titleFontWeight,   // was '800'
     lineHeight: heroTokens.titleLineHeight,   // was 38
   },
   subtitle: {
     fontSize: heroTokens.subtitleFontSize,    // was 16
     lineHeight: heroTokens.subtitleLineHeight, // was 24
   },
   ```

5. Since StyleSheet.create() requires static values, move typography to inline styles in the JSX:
   ```typescript
   <Text
     style={[
       styles.title,
       {
         fontSize: heroTokens.titleFontSize,
         fontWeight: String(heroTokens.titleFontWeight) as any,
         lineHeight: heroTokens.titleLineHeight,
         color: '#FFFFFF',
         textAlign,
         marginBottom: spacing[2],
       },
     ]}
   >
   ```

   And for subtitle:
   ```typescript
   <Text
     style={[
       styles.subtitle,
       {
         fontSize: heroTokens.subtitleFontSize,
         lineHeight: heroTokens.subtitleLineHeight,
         color: 'rgba(255,255,255,0.9)',
         textAlign,
         marginBottom: spacing[6],
       },
     ]}
   >
   ```

6. Remove fontSize, lineHeight, fontWeight from the static StyleSheet styles (keep only structural styles like textAlign).
  </action>
  <verify>TypeScript compiles: `cd packages/registry && npx tsc --noEmit`</verify>
  <done>HeroBlock uses ecommerceBlockTokens.hero for all typography</done>
</task>

</tasks>

<verification>
1. TypeScript compilation passes for packages/registry
2. BannerBlock no longer has SIZE_CONFIG constant
3. HeroBlock no longer has hardcoded fontSize: 32, 16
4. Both blocks import ecommerceBlockTokens from @metacells/mcellui-core
</verification>

<success_criteria>
- BannerBlock uses tokens for sm/md/lg size variants
- HeroBlock uses tokens for title/subtitle typography
- No hardcoded font sizes remain in either block
- TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/11-blocks-ecommerce-info/11-02-SUMMARY.md`
</output>
