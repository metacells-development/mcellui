---
phase: 11-blocks-ecommerce-info
plan: 05
type: execute
wave: 2
depends_on: ["11-01"]
files_modified:
  - packages/registry/blocks/notification-item.tsx
  - packages/registry/blocks/media-item.tsx
  - packages/registry/blocks/order-item.tsx
  - packages/registry/blocks/task-item.tsx
  - packages/registry/blocks/search-header.tsx
autonomous: true

must_haves:
  truths:
    - "NotificationItem uses infoBlockTokens for typography"
    - "MediaItem uses infoBlockTokens for dimensions"
    - "OrderItem uses infoBlockTokens for typography"
    - "TaskItem uses infoBlockTokens for typography"
    - "SearchHeader uses infoBlockTokens for badge offset"
  artifacts:
    - path: "packages/registry/blocks/notification-item.tsx"
      provides: "Token-based NotificationItem"
      contains: "infoBlockTokens"
    - path: "packages/registry/blocks/media-item.tsx"
      provides: "Token-based MediaItem"
      contains: "infoBlockTokens"
    - path: "packages/registry/blocks/order-item.tsx"
      provides: "Token-based OrderItem"
      contains: "infoBlockTokens"
    - path: "packages/registry/blocks/task-item.tsx"
      provides: "Token-based TaskItem"
      contains: "infoBlockTokens"
    - path: "packages/registry/blocks/search-header.tsx"
      provides: "Token-based SearchHeader"
      contains: "infoBlockTokens"
  key_links:
    - from: "packages/registry/blocks/notification-item.tsx"
      to: "@metacells/mcellui-core"
      via: "infoBlockTokens import"
      pattern: "infoBlockTokens\\.notification"
---

<objective>
Migrate NotificationItem, MediaItem, OrderItem, TaskItem, and SearchHeader to use centralized infoBlockTokens instead of hardcoded typography and dimension values.

Purpose: Replace hardcoded typography/dimensions with centralized tokens so these list item blocks are theme-consistent and customizable.

Output: Updated notification-item.tsx, media-item.tsx, order-item.tsx, task-item.tsx, and search-header.tsx using infoBlockTokens.
</objective>

<execution_context>
@/Users/johanneschristler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/johanneschristler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/11-blocks-ecommerce-info/11-01-SUMMARY.md
@packages/registry/blocks/notification-item.tsx
@packages/registry/blocks/media-item.tsx
@packages/registry/blocks/order-item.tsx
@packages/registry/blocks/task-item.tsx
@packages/registry/blocks/search-header.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate NotificationItem and MediaItem to infoBlockTokens</name>
  <files>packages/registry/blocks/notification-item.tsx, packages/registry/blocks/media-item.tsx</files>
  <action>
**NotificationItem (notification-item.tsx):**

1. Add infoBlockTokens to the import:
   ```typescript
   import { useTheme, infoBlockTokens } from '@metacells/mcellui-core';
   ```

2. In the component body:
   ```typescript
   const notificationTokens = infoBlockTokens.notification;
   ```

3. Update text style:
   ```typescript
   <Text style={[styles.text, {
     color: colors.foreground,
     fontSize: notificationTokens.textFontSize,
     lineHeight: notificationTokens.textLineHeight,
   }]}>
   ```

4. Update title (inside Text) fontWeight:
   ```typescript
   <Text style={[styles.title, {
     fontWeight: String(notificationTokens.titleFontWeight) as any,
   }]}>{title}</Text>
   ```

5. Update time style:
   ```typescript
   <Text style={[styles.time, {
     color: colors.foregroundMuted,
     marginTop: spacing[1],
     fontSize: notificationTokens.timeFontSize,
   }]}>
   ```

6. Update unread dot size:
   ```typescript
   <View style={[styles.unreadDot, {
     backgroundColor: colors.primary,
     left: spacing[1],
     width: notificationTokens.unreadDotSize,
     height: notificationTokens.unreadDotSize,
     borderRadius: notificationTokens.unreadDotSize / 2,
   }]} />
   ```

7. Update icon container dimensions:
   ```typescript
   <View style={[styles.iconContainer, {
     backgroundColor: colors.secondary,
     borderRadius: radius.full,
     width: notificationTokens.avatarSize,
     height: notificationTokens.avatarSize,
   }]}>
   ```

8. Remove hardcoded fontSize/width/height from StyleSheet.

**MediaItem (media-item.tsx):**

1. Add infoBlockTokens to the import:
   ```typescript
   import { useTheme, infoBlockTokens } from '@metacells/mcellui-core';
   ```

2. In the component body:
   ```typescript
   const mediaTokens = infoBlockTokens.media;
   ```

3. Update default size prop:
   - Keep `size = 100` as default but note it matches `mediaTokens.defaultSize`

4. Update play button dimensions:
   ```typescript
   <View style={[styles.playButtonBg, {
     backgroundColor: 'rgba(0,0,0,0.5)',
     width: mediaTokens.playButtonSize,
     height: mediaTokens.playButtonSize,
     borderRadius: mediaTokens.playButtonSize / 2,
   }]}>
     <PlayIcon size={mediaTokens.playIconSize} />
   </View>
   ```

5. Update checkbox dimensions:
   ```typescript
   <View style={[styles.checkbox, {
     top: mediaTokens.checkboxOffset,
     right: mediaTokens.checkboxOffset,
   }]}>
     <View style={[styles.checkboxInner, {
       width: mediaTokens.checkboxSize,
       height: mediaTokens.checkboxSize,
       ...
     }]}>
       {selected && <CheckIcon size={mediaTokens.checkIconSize} />}
     </View>
   </View>
   ```

6. Update duration badge margin:
   ```typescript
   <View style={[styles.durationBadge, { margin: mediaTokens.durationBadgeMargin }]}>
   ```

7. Remove hardcoded width/height/size values from StyleSheet.
  </action>
  <verify>TypeScript compiles: `cd packages/registry && npx tsc --noEmit`</verify>
  <done>NotificationItem and MediaItem use infoBlockTokens for typography and dimensions</done>
</task>

<task type="auto">
  <name>Task 2: Migrate OrderItem, TaskItem, and SearchHeader to infoBlockTokens</name>
  <files>packages/registry/blocks/order-item.tsx, packages/registry/blocks/task-item.tsx, packages/registry/blocks/search-header.tsx</files>
  <action>
**OrderItem (order-item.tsx):**

1. Add infoBlockTokens to the import:
   ```typescript
   import { useTheme, infoBlockTokens } from '@metacells/mcellui-core';
   ```

2. In the component body:
   ```typescript
   const orderTokens = infoBlockTokens.order;
   ```

3. Update order ID style:
   ```typescript
   <Text style={[styles.orderId, {
     color: colors.foreground,
     fontSize: orderTokens.orderIdFontSize,
     fontWeight: String(orderTokens.orderIdFontWeight) as any,
   }]}>
   ```

4. Update date style:
   ```typescript
   <Text style={[styles.date, {
     color: colors.foregroundMuted,
     fontSize: orderTokens.dateFontSize,
   }]}>
   ```

5. Update item count style:
   ```typescript
   <Text style={[styles.itemCount, {
     color: colors.foregroundMuted,
     fontSize: orderTokens.itemCountFontSize,
   }]}>
   ```

6. Update total style:
   ```typescript
   <Text style={[styles.total, {
     color: colors.foreground,
     fontSize: orderTokens.totalFontSize,
     fontWeight: String(orderTokens.totalFontWeight) as any,
   }]}>
   ```

7. Update product image size:
   ```typescript
   <View style={[styles.productImage, {
     width: orderTokens.productImageSize,
     height: orderTokens.productImageSize,
     ...
   }]}>
   ```

8. Update more products text:
   ```typescript
   <Text style={[styles.moreText, {
     color: colors.foregroundMuted,
     fontSize: orderTokens.moreTextFontSize,
     fontWeight: String(orderTokens.moreTextFontWeight) as any,
   }]}>
   ```

9. Remove hardcoded fontSize/fontWeight/width/height from StyleSheet.

**TaskItem (task-item.tsx):**

1. Add infoBlockTokens to the import:
   ```typescript
   import { useTheme, infoBlockTokens } from '@metacells/mcellui-core';
   ```

2. In the component body:
   ```typescript
   const taskTokens = infoBlockTokens.task;
   ```

3. Update title style:
   ```typescript
   <Text style={[styles.title, {
     color: colors.foreground,
     textDecorationLine: task.completed ? 'line-through' : 'none',
     fontSize: taskTokens.titleFontSize,
     fontWeight: String(taskTokens.titleFontWeight) as any,
     lineHeight: taskTokens.titleLineHeight,
   }]}>
   ```

4. Update description style:
   ```typescript
   <Text style={[styles.description, {
     color: colors.foregroundMuted,
     marginTop: spacing[0.5],
     fontSize: taskTokens.descriptionFontSize,
   }]}>
   ```

5. Update due date style:
   ```typescript
   <Text style={[styles.dueDate, {
     color: isOverdue ? colors.destructive : colors.foregroundMuted,
     marginLeft: spacing[0.5],
     fontSize: taskTokens.dueDateFontSize,
   }]}>
   ```

6. Update more tags style:
   ```typescript
   <Text style={[styles.moreTags, {
     color: colors.foregroundMuted,
     fontSize: taskTokens.moreTagsFontSize,
   }]}>
   ```

7. Update icon sizes:
   ```typescript
   <FlagIcon size={taskTokens.flagIconSize} color={priorityConfig.color} />
   <CalendarIcon size={taskTokens.calendarIconSize} color={...} />
   ```

8. Remove hardcoded fontSize/fontWeight from StyleSheet.

**SearchHeader (search-header.tsx):**

1. Add infoBlockTokens to the import:
   ```typescript
   import { useTheme, infoBlockTokens } from '@metacells/mcellui-core';
   ```

2. In the component body:
   ```typescript
   const searchHeaderTokens = infoBlockTokens.searchHeader;
   ```

3. Update badge wrapper offset:
   ```typescript
   badgeWrapper: {
     position: 'absolute',
     top: searchHeaderTokens.filterBadgeOffset,
     right: searchHeaderTokens.filterBadgeOffset,
   },
   ```
   Note: Since StyleSheet.create needs static values, this may stay hardcoded or move to inline style. The -4 value matches token.

4. Alternative: Use inline style for badgeWrapper position:
   ```typescript
   <View style={[styles.badgeWrapper, {
     top: searchHeaderTokens.filterBadgeOffset,
     right: searchHeaderTokens.filterBadgeOffset,
   }]}>
   ```
  </action>
  <verify>TypeScript compiles: `cd packages/registry && npx tsc --noEmit`</verify>
  <done>OrderItem, TaskItem, and SearchHeader use infoBlockTokens for typography and dimensions</done>
</task>

</tasks>

<verification>
1. TypeScript compilation passes for packages/registry
2. NotificationItem no longer has hardcoded fontSize: 15, 13
3. MediaItem no longer has hardcoded width/height: 44, 24, 14
4. OrderItem no longer has hardcoded fontSize: 15, 13, 14, 16
5. TaskItem no longer has hardcoded fontSize: 15, 13, 12
6. SearchHeader uses token for badge offset
7. All five blocks import infoBlockTokens from @metacells/mcellui-core
</verification>

<success_criteria>
- NotificationItem uses tokens for text/time typography and unread dot
- MediaItem uses tokens for play button and checkbox dimensions
- OrderItem uses tokens for all typography and product image size
- TaskItem uses tokens for title/description/meta typography
- SearchHeader uses tokens for badge positioning
- No hardcoded font sizes remain in any block
- TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/11-blocks-ecommerce-info/11-05-SUMMARY.md`
</output>
