---
phase: 21-demo-consistency-validation
plan: 05
type: execute
wave: 2
depends_on: ["21-01", "21-02", "21-03", "21-04"]
files_modified:
  - apps/demo/app/index.tsx
  - apps/demo/app/playground.tsx
  - apps/demo/app/components/[name].tsx
  - apps/demo/context/ThemeSettingsContext.tsx
  - apps/demo/components/playground/ThemeGrid.tsx
  - apps/demo/components/playground/ThemeCell.tsx
  - apps/demo/components/playground/ComponentPreview.tsx
autonomous: false

must_haves:
  truths:
    - "App screens use typography tokens"
    - "Playground components use semantic tokens"
    - "Demo app renders correctly in dark mode on iOS Simulator"
    - "All visible screens adapt to theme changes"
  artifacts:
    - path: "apps/demo/app/index.tsx"
      provides: "Home screen with theme-adaptive styling"
      contains: "fontSize.xl"
    - path: "apps/demo/app/playground.tsx"
      provides: "Theme playground with token visualization"
      contains: "colors.foreground"
  key_links:
    - from: "apps/demo/app/*.tsx"
      to: "useTheme()"
      via: "token access"
      pattern: "useTheme\\(\\)"
---

<objective>
Migrate app screens and playground, then verify dark mode across entire demo app

Purpose: Complete token migration for app screens (index, playground, [name]) and playground components. Then perform manual dark mode verification on iOS Simulator to confirm no visual breaks.

Output: Complete demo app token migration with verified dark mode support
</objective>

<execution_context>
@/Users/johanneschristler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/johanneschristler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/21-demo-consistency-validation/21-RESEARCH.md
@.planning/phases/21-demo-consistency-validation/21-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate app screen files</name>
  <files>
apps/demo/app/index.tsx
apps/demo/app/playground.tsx
apps/demo/app/components/[name].tsx
  </files>
  <action>
**index.tsx (~10 typography violations):**
The home screen shows component list. Migrate:
- fontSize values to tokens
- Verify colors already use semantic tokens (from Phase 19 migration)

**playground.tsx (~15 violations):**
Theme playground showing all tokens. Migrate:
- Typography values to tokens
- UI chrome colors to semantic tokens
- KEEP: Token value displays (showing actual hex values) as they demonstrate token values

**components/[name].tsx (~5 violations):**
Component detail screen. Migrate:
- Typography values
- UI chrome colors

Pattern:
```tsx
const { colors, spacing, fontSize, fontWeight } = useTheme();

// Title styling
<Text style={[styles.title, { fontSize: fontSize.xl, fontWeight: fontWeight.bold, color: colors.foreground }]}>
  {title}
</Text>
```
  </action>
  <verify>
grep -E "fontSize:\s*[0-9]+" apps/demo/app/index.tsx apps/demo/app/playground.tsx "apps/demo/app/components/[name].tsx" should return 0 matches.
  </verify>
  <done>
App screen files use typography tokens. Token displays preserved for playground.
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate playground and context components</name>
  <files>
apps/demo/context/ThemeSettingsContext.tsx
apps/demo/components/playground/ThemeGrid.tsx
apps/demo/components/playground/ThemeCell.tsx
apps/demo/components/playground/ComponentPreview.tsx
  </files>
  <action>
**ThemeSettingsContext.tsx:**
Context provider - likely no styling, but check for any hardcoded values.

**ThemeGrid.tsx, ThemeCell.tsx, ComponentPreview.tsx:**
These show theme visualizations. Migrate:
- UI chrome typography to tokens
- UI background/border colors to semantic tokens
- KEEP: Color swatch displays showing actual token values (intentional)

The playground shows token values - it needs to display actual colors. Only migrate the UI chrome around those displays.

Example of what to keep:
```tsx
// KEEP: Showing the actual token color value
<View style={{ backgroundColor: colors.primary }}>
  <Text>{colors.primary}</Text>  // Displays the hex value
</View>
```
  </action>
  <verify>
grep -E "fontSize:\s*[0-9]+" apps/demo/context/*.tsx apps/demo/components/playground/*.tsx should return 0 matches.
  </verify>
  <done>
Playground components use tokens for UI chrome. Token value displays preserved.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete demo app token migration:
- _layout.tsx theme selector migrated (Plan 01)
- 16 block files migrated (Plan 02)
- 58 demo files migrated (Plans 03-04)
- App screens and playground migrated (this plan)
  </what-built>
  <how-to-verify>
1. Start demo app: `cd apps/demo && npx expo start`
2. Open on iOS Simulator

**Light Mode Verification:**
3. Verify home screen renders correctly
4. Open theme selector (paint palette icon) - should display correctly
5. Navigate to 3-4 component demos - verify text is readable
6. Navigate to Playground - verify token displays work

**Dark Mode Verification:**
7. Toggle dark mode (sun/moon icon in header)
8. Verify home screen adapts - no white backgrounds, readable text
9. Open theme selector modal - should adapt to dark mode
10. Navigate to same 3-4 component demos - verify dark mode works
11. Navigate to Playground - verify it adapts

**Theme Switching:**
12. Change color theme (blue -> rose -> violet)
13. Verify colors update throughout app
14. Change radius preset
15. Verify radius changes apply

Report any issues:
- White/black backgrounds that don't adapt
- Text that becomes invisible
- Components that look broken
- Contrast issues (low contrast text)
  </how-to-verify>
  <resume-signal>Type "approved" if dark mode works correctly, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
1. All app screen and playground files use typography tokens
2. No hardcoded fontSize values remain in apps/demo/
3. Demo app renders correctly in both light and dark mode
4. Theme selector adapts to current color scheme
5. All component demos work in dark mode
</verification>

<success_criteria>
- Zero hardcoded fontSize values in apps/demo/
- Demo app passes visual dark mode verification on iOS Simulator
- Theme selector modal adapts to dark/light mode
- All screens readable in both modes
- No visual regressions from token migration
</success_criteria>

<output>
After completion, create `.planning/phases/21-demo-consistency-validation/21-05-SUMMARY.md`
</output>
