---
phase: 17-registry-structure-metadata
plan: 02
type: execute
wave: 2
depends_on: ["17-01"]
files_modified:
  - packages/registry/registry.json
  - packages/registry/blocks/notification-item.tsx
  - packages/registry/blocks/content-card.tsx
  - packages/registry/blocks/feature-card.tsx
  - packages/registry/blocks/stats-card.tsx
  - packages/registry/blocks/social-proof-bar.tsx
  - packages/registry/blocks/search-header.tsx
  - packages/registry/blocks/onboarding-slide.tsx
  - packages/registry/blocks/media-item.tsx
  - packages/registry/blocks/feed-post-card.tsx
  - packages/registry/blocks/user-list-item.tsx
  - packages/registry/blocks/chat-bubble.tsx
  - packages/registry/blocks/comment-item.tsx
  - packages/registry/blocks/product-card.tsx
  - packages/registry/blocks/cart-item.tsx
  - packages/registry/blocks/order-item.tsx
  - packages/registry/blocks/review-card.tsx
  - packages/registry/blocks/task-item.tsx
  - packages/registry/blocks/event-card.tsx
  - packages/registry/blocks/article-card.tsx
  - packages/registry/blocks/pricing-card.tsx
  - packages/registry/screens/cart-screen.tsx
  - packages/registry/screens/comments-screen.tsx
  - packages/registry/screens/feed-screen.tsx
  - packages/registry/screens/followers-screen.tsx
  - packages/registry/screens/home-screen.tsx
  - packages/registry/screens/notifications-screen.tsx
  - packages/registry/screens/order-history-screen.tsx
  - packages/mcp-server/registry/registry.json
autonomous: true

must_haves:
  truths:
    - "All 28 blocks have names ending with -block suffix"
    - "All registryDependencies referencing renamed blocks are updated"
    - "All block .tsx files are renamed with -block suffix"
    - "Screen components import renamed block files correctly"
    - "MCP server registry.json is synced with main registry"
  artifacts:
    - path: "packages/registry/registry.json"
      provides: "Registry with consistent block naming"
      contains: "notification-item-block"
    - path: "packages/registry/blocks/notification-item-block.tsx"
      provides: "Renamed block file"
    - path: "packages/mcp-server/registry/registry.json"
      provides: "Synced copy of main registry"
      contains: "notification-item-block"
  key_links:
    - from: "packages/registry/registry.json (registryDependencies)"
      to: "packages/registry/registry.json (component names)"
      via: "registryDependencies arrays reference component names"
      pattern: "notification-item-block"
    - from: "packages/registry/screens/*.tsx"
      to: "packages/registry/blocks/*-block.tsx"
      via: "import paths reference block filenames"
      pattern: "from.*block"
---

<objective>
Rename 20 blocks to add -block suffix for consistent naming across the entire registry.

Purpose: Fulfills REG-03 (consistent naming). The CONTEXT.md decision requires all blocks to end with `-block` suffix. 20 of 28 blocks currently lack this suffix. Renaming ensures component type is obvious from name alone.

Output: Renamed block files, updated registry.json entries (names, files, registryDependencies, displayNames), updated screen imports, synced MCP server registry.
</objective>

<execution_context>
@/Users/johanneschristler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/johanneschristler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/17-registry-structure-metadata/17-RESEARCH.md
@.planning/phases/17-registry-structure-metadata/17-01-SUMMARY.md

Key context:
- 20 blocks need -block suffix added to their names
- Rename map (old -> new):
  notification-item -> notification-item-block
  content-card -> content-card-block
  feature-card -> feature-card-block
  stats-card -> stats-card-block
  social-proof-bar -> social-proof-bar-block
  search-header -> search-header-block
  onboarding-slide -> onboarding-slide-block
  media-item -> media-item-block
  feed-post-card -> feed-post-card-block
  user-list-item -> user-list-item-block
  chat-bubble -> chat-bubble-block
  comment-item -> comment-item-block
  product-card -> product-card-block
  cart-item -> cart-item-block
  order-item -> order-item-block
  review-card -> review-card-block
  task-item -> task-item-block
  event-card -> event-card-block
  article-card -> article-card-block
  pricing-card -> pricing-card-block

- 7 screens reference renamed blocks in registryDependencies:
  notifications-screen -> notification-item
  feed-screen -> feed-post-card
  cart-screen -> cart-item
  followers-screen -> user-list-item
  comments-screen -> comment-item
  order-history-screen -> order-item
  home-screen -> stats-card, content-card

- Screen .tsx files also import these blocks (import paths need updating)
- MCP server has identical copy at packages/mcp-server/registry/registry.json
- 8 blocks already have correct suffix: login-block, signup-block, settings-list-block, profile-block, empty-state-block, error-state-block, hero-block, banner-block
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rename 20 block files and update registry.json</name>
  <files>
    packages/registry/blocks/*.tsx (20 files renamed)
    packages/registry/registry.json
  </files>
  <action>
**Step 1: Rename 20 block .tsx files**

Use `git mv` for each file to preserve history:
```bash
cd packages/registry/blocks
git mv notification-item.tsx notification-item-block.tsx
git mv content-card.tsx content-card-block.tsx
git mv feature-card.tsx feature-card-block.tsx
git mv stats-card.tsx stats-card-block.tsx
git mv social-proof-bar.tsx social-proof-bar-block.tsx
git mv search-header.tsx search-header-block.tsx
git mv onboarding-slide.tsx onboarding-slide-block.tsx
git mv media-item.tsx media-item-block.tsx
git mv feed-post-card.tsx feed-post-card-block.tsx
git mv user-list-item.tsx user-list-item-block.tsx
git mv chat-bubble.tsx chat-bubble-block.tsx
git mv comment-item.tsx comment-item-block.tsx
git mv product-card.tsx product-card-block.tsx
git mv cart-item.tsx cart-item-block.tsx
git mv order-item.tsx order-item-block.tsx
git mv review-card.tsx review-card-block.tsx
git mv task-item.tsx task-item-block.tsx
git mv event-card.tsx event-card-block.tsx
git mv article-card.tsx article-card-block.tsx
git mv pricing-card.tsx pricing-card-block.tsx
```

**Step 2: Update registry.json for all 20 renamed blocks**

For each renamed block, update these fields:
- `name`: add `-block` suffix (e.g., `"notification-item"` -> `"notification-item-block"`)
- `displayName`: update accordingly (e.g., `"Notification Item"` -> `"Notification Item Block"`)
- `files`: update path (e.g., `"blocks/notification-item.tsx"` -> `"blocks/notification-item-block.tsx"`)

**Step 3: Update registryDependencies throughout registry.json**

Update ALL registryDependencies arrays that reference renamed blocks. The affected components:
- `notifications-screen`: `"notification-item"` -> `"notification-item-block"`
- `feed-screen`: `"feed-post-card"` -> `"feed-post-card-block"`
- `cart-screen`: `"cart-item"` -> `"cart-item-block"`
- `followers-screen`: `"user-list-item"` -> `"user-list-item-block"`
- `comments-screen`: `"comment-item"` -> `"comment-item-block"`
- `order-history-screen`: `"order-item"` -> `"order-item-block"`
- `home-screen`: `"stats-card"` -> `"stats-card-block"`, `"content-card"` -> `"content-card-block"`

IMPORTANT: Do a thorough search for ALL references to these 20 old names in registryDependencies across the entire components array. The 7 screens listed above were found in research, but verify there are no others.
  </action>
  <verify>
Run validation:
```bash
# Check all blocks have -block suffix
node -e "const r=JSON.parse(require('fs').readFileSync('packages/registry/registry.json','utf8')); const bad = r.components.filter(c => c.type === 'block' && !c.name.endsWith('-block')); console.log('Blocks without -block suffix:', bad.length); bad.forEach(c => console.log('  ', c.name));"

# Check all block files exist
ls packages/registry/blocks/*-block.tsx | wc -l
# Should be 28

# Check no old files remain
ls packages/registry/blocks/notification-item.tsx 2>/dev/null && echo "OLD FILE EXISTS" || echo "OK"

# Check registryDependencies don't reference old names
node -e "const r=JSON.parse(require('fs').readFileSync('packages/registry/registry.json','utf8')); const oldNames = ['notification-item','content-card','feature-card','stats-card','social-proof-bar','search-header','onboarding-slide','media-item','feed-post-card','user-list-item','chat-bubble','comment-item','product-card','cart-item','order-item','review-card','task-item','event-card','article-card','pricing-card']; const bad = r.components.filter(c => c.registryDependencies && c.registryDependencies.some(d => oldNames.includes(d))); console.log('Stale registryDependencies:', bad.length); bad.forEach(c => console.log('  ', c.name, c.registryDependencies));"
```
  </verify>
  <done>All 28 blocks have -block suffix in name, files path, and displayName; all registryDependencies updated; no stale references remain</done>
</task>

<task type="auto">
  <name>Task 2: Update screen imports and sync MCP registry</name>
  <files>
    packages/registry/screens/cart-screen.tsx
    packages/registry/screens/comments-screen.tsx
    packages/registry/screens/feed-screen.tsx
    packages/registry/screens/followers-screen.tsx
    packages/registry/screens/home-screen.tsx
    packages/registry/screens/notifications-screen.tsx
    packages/registry/screens/order-history-screen.tsx
    packages/mcp-server/registry/registry.json
  </files>
  <action>
**Step 1: Update import paths in 7 screen files**

Each screen file that imports a renamed block needs its import path updated. The import pattern is typically:
```typescript
import { SomeComponent } from '../blocks/old-name';
// Change to:
import { SomeComponent } from '../blocks/old-name-block';
```

Update these specific imports:
- `notifications-screen.tsx`: `../blocks/notification-item` -> `../blocks/notification-item-block`
- `feed-screen.tsx`: `../blocks/feed-post-card` -> `../blocks/feed-post-card-block`
- `cart-screen.tsx`: `../blocks/cart-item` -> `../blocks/cart-item-block`
- `followers-screen.tsx`: `../blocks/user-list-item` -> `../blocks/user-list-item-block`
- `comments-screen.tsx`: `../blocks/comment-item` -> `../blocks/comment-item-block`
- `order-history-screen.tsx`: `../blocks/order-item` -> `../blocks/order-item-block`
- `home-screen.tsx`: `../blocks/stats-card` -> `../blocks/stats-card-block`, `../blocks/content-card` -> `../blocks/content-card-block`

IMPORTANT: Search ALL screen files for any import from `../blocks/` that references one of the 20 renamed blocks â€” don't rely only on the 7 listed. Use grep to confirm.

**Step 2: Sync MCP server registry**

Copy the updated registry.json to the MCP server:
```bash
cp packages/registry/registry.json packages/mcp-server/registry/registry.json
```

The MCP server keeps an identical copy of registry.json. After all registry changes (Plan 01 metadata + Plan 02 renames), copy the final version.
  </action>
  <verify>
```bash
# Check screen imports are correct (no references to old block names)
grep -r "from.*blocks/notification-item'" packages/registry/screens/ && echo "STALE IMPORT" || echo "OK"
grep -r "from.*blocks/content-card'" packages/registry/screens/ && echo "STALE IMPORT" || echo "OK"
grep -r "from.*blocks/cart-item'" packages/registry/screens/ && echo "STALE IMPORT" || echo "OK"

# Check MCP registry is synced
diff packages/registry/registry.json packages/mcp-server/registry/registry.json
# Should show no differences
```
  </verify>
  <done>All screen imports reference renamed block files; MCP server registry.json is identical to main registry</done>
</task>

</tasks>

<verification>
1. All 28 blocks have names ending with `-block` in registry.json
2. All 28 block .tsx files exist with `-block` suffix in packages/registry/blocks/
3. No old block files remain (20 renamed files are gone)
4. All registryDependencies arrays reference new `-block` names
5. All screen .tsx files import from correct `-block` paths
6. MCP server registry.json is identical to main registry
7. registry.json is valid JSON
</verification>

<success_criteria>
- 20 block files renamed with -block suffix (git mv)
- registry.json has 28 blocks, all with -block suffix in name + files
- All registryDependencies updated to reference new names
- 7+ screen imports updated to reference new block file paths
- MCP server registry synced
</success_criteria>

<output>
After completion, create `.planning/phases/17-registry-structure-metadata/17-02-SUMMARY.md`
</output>
