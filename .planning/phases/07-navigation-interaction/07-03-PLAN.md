---
phase: 07-navigation-interaction
plan: 03
type: execute
wave: 2
depends_on: ["07-01"]
files_modified:
  - packages/registry/ui/accordion.tsx
  - packages/registry/ui/collapsible.tsx
autonomous: true

must_haves:
  truths:
    - "Accordion component uses accordionTokens for padding and typography"
    - "Accordion uses ACCORDION_CONSTANTS for spring animation config"
    - "Accordion container uses componentRadius.accordion"
    - "Collapsible component uses collapsibleTokens for padding"
    - "Collapsible uses COLLAPSIBLE_CONSTANTS for spring animation config"
  artifacts:
    - path: "packages/registry/ui/accordion.tsx"
      provides: "Accordion with centralized tokens"
      contains: "accordionTokens"
    - path: "packages/registry/ui/collapsible.tsx"
      provides: "Collapsible with centralized tokens"
      contains: "collapsibleTokens"
  key_links:
    - from: "packages/registry/ui/accordion.tsx"
      to: "packages/core/src/theme/components.ts"
      via: "import accordionTokens"
      pattern: "accordionTokens|ACCORDION_CONSTANTS"
    - from: "packages/registry/ui/collapsible.tsx"
      to: "packages/core/src/theme/components.ts"
      via: "import collapsibleTokens"
      pattern: "collapsibleTokens|COLLAPSIBLE_CONSTANTS"
---

<objective>
Migrate Accordion and Collapsible components to use centralized token system

Purpose: Replace hardcoded padding, font sizes, and animation config with accordionTokens, collapsibleTokens, and associated constants for theme consistency.

Output: Updated accordion.tsx and collapsible.tsx using centralized tokens
</objective>

<execution_context>
@/Users/johanneschristler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/johanneschristler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/07-navigation-interaction/07-01-SUMMARY.md
@packages/registry/ui/accordion.tsx
@packages/registry/ui/collapsible.tsx
@packages/core/src/theme/components.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate Accordion to centralized tokens</name>
  <files>packages/registry/ui/accordion.tsx</files>
  <action>
Update Accordion component to use centralized tokens. Key changes:

1. Import tokens at top of file:
```typescript
import {
  useTheme,
  areAnimationsDisabled,
  accordionTokens,
  ACCORDION_CONSTANTS,
} from '@metacells/mcellui-core';
```

2. Replace local SPRING_CONFIG constant:
- Delete: `const SPRING_CONFIG = { damping: 20, stiffness: 200, mass: 0.5 };`
- Use: `ACCORDION_CONSTANTS.spring` throughout

3. In Accordion root component:
- Use `componentRadius.accordion` for container borderRadius (via useTheme)
- Use `accordionTokens.item.borderWidth` for border width

4. In AccordionTrigger component:
- Replace `paddingVertical: spacing[4]` with `accordionTokens.trigger.paddingVertical`
- Replace `paddingHorizontal: spacing[4]` with `accordionTokens.trigger.paddingHorizontal`
- Replace hardcoded `fontSize: 15` in styles with `accordionTokens.trigger.fontSize`
- Replace `fontWeight: '500'` with `accordionTokens.trigger.fontWeight`
- Replace `marginRight: 8` with `accordionTokens.trigger.iconMargin`

5. In AccordionContent component:
- Replace `paddingHorizontal: spacing[4]` with `accordionTokens.content.paddingHorizontal`
- Replace `paddingBottom: spacing[4]` with `accordionTokens.content.paddingBottom`

6. Update ChevronIcon:
- Use `ACCORDION_CONSTANTS.chevronSize` for width/height props instead of hardcoded 16
  </action>
  <verify>
Run TypeScript compilation:
```bash
cd /Users/johanneschristler/Code/metacells/other/mcellui && npx tsc --noEmit -p packages/registry/tsconfig.json
```
Verify no errors. Check that accordion.tsx imports accordionTokens and ACCORDION_CONSTANTS.
  </verify>
  <done>
Accordion component uses accordionTokens for all typography and spacing. Uses ACCORDION_CONSTANTS for spring config and chevron size. Uses componentRadius.accordion for container border radius. No hardcoded font sizes, padding, or animation config values remain.
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate Collapsible to centralized tokens</name>
  <files>packages/registry/ui/collapsible.tsx</files>
  <action>
Update Collapsible component to use centralized tokens. Key changes:

1. Import tokens at top of file:
```typescript
import {
  useTheme,
  areAnimationsDisabled,
  collapsibleTokens,
  COLLAPSIBLE_CONSTANTS,
} from '@metacells/mcellui-core';
```

2. Replace local SPRING_CONFIG constant:
- Delete: `const SPRING_CONFIG = { damping: 20, stiffness: 200, mass: 0.5 };`
- Use: `COLLAPSIBLE_CONSTANTS.spring` throughout

3. In CollapsibleTrigger component:
- Replace `paddingVertical: spacing[3]` with `collapsibleTokens.trigger.paddingVertical`
- Replace `paddingHorizontal: spacing[4]` with `collapsibleTokens.trigger.paddingHorizontal`
- Replace `marginRight: 8` in triggerContent styles with `collapsibleTokens.trigger.iconMargin`

4. Update ChevronIcon:
- Use `COLLAPSIBLE_CONSTANTS.chevronSize` for width/height props instead of hardcoded 16
  </action>
  <verify>
Run TypeScript compilation:
```bash
cd /Users/johanneschristler/Code/metacells/other/mcellui && npx tsc --noEmit -p packages/registry/tsconfig.json
```
Verify no errors. Check that collapsible.tsx imports collapsibleTokens and COLLAPSIBLE_CONSTANTS.
  </verify>
  <done>
Collapsible component uses collapsibleTokens for trigger padding. Uses COLLAPSIBLE_CONSTANTS for spring config and chevron size. No hardcoded padding or animation config values remain.
  </done>
</task>

</tasks>

<verification>
1. accordion.tsx imports accordionTokens, ACCORDION_CONSTANTS from @metacells/mcellui-core
2. Accordion uses componentRadius.accordion for container
3. AccordionTrigger uses accordionTokens.trigger.paddingVertical/paddingHorizontal
4. AccordionContent uses accordionTokens.content.paddingHorizontal/paddingBottom
5. collapsible.tsx imports collapsibleTokens, COLLAPSIBLE_CONSTANTS from @metacells/mcellui-core
6. CollapsibleTrigger uses collapsibleTokens.trigger.paddingVertical/paddingHorizontal
7. Both use centralized SPRING_CONFIG from constants (not local const)
8. TypeScript compiles for registry package
</verification>

<success_criteria>
- No hardcoded numeric values for fontSize, padding, or margin in accordion.tsx
- No hardcoded numeric values for padding in collapsible.tsx
- Animation spring config references ACCORDION_CONSTANTS.spring / COLLAPSIBLE_CONSTANTS.spring
- Chevron size references constants (not hardcoded 16)
- Demo app compiles and renders both components correctly
</success_criteria>

<output>
After completion, create `.planning/phases/07-navigation-interaction/07-03-SUMMARY.md`
</output>
