---
phase: 08-advanced-components
plan: 05
type: execute
wave: 2
depends_on: ["08-01"]
files_modified:
  - packages/registry/ui/search-input.tsx
autonomous: true

must_haves:
  truths:
    - "SearchInput uses searchInputTokens from core theme"
    - "No hardcoded height, fontSize, or container width values"
    - "Component maintains loading and clear button functionality"
  artifacts:
    - path: "packages/registry/ui/search-input.tsx"
      provides: "Token-based SearchInput component"
      contains: "searchInputTokens"
  key_links:
    - from: "packages/registry/ui/search-input.tsx"
      to: "packages/core/src/theme/components.ts"
      via: "import searchInputTokens"
      pattern: "searchInputTokens"
---

<objective>
Migrate SearchInput component to use centralized searchInputTokens from core theme.

Purpose: Replace hardcoded height, fontSize, and spacing values with theme tokens.

Output: SearchInput uses searchInputTokens, eliminating magic numbers while preserving loading/clear functionality.
</objective>

<execution_context>
@/Users/johanneschristler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/johanneschristler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/08-advanced-components/08-01-SUMMARY.md
@packages/core/src/theme/components.ts
@packages/registry/ui/search-input.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate SearchInput to searchInputTokens</name>
  <files>packages/registry/ui/search-input.tsx</files>
  <action>
1. Import searchInputTokens (or access via useTheme).

2. Replace container hardcoded height:
   ```typescript
   // BEFORE
   <Animated.View
     style={[
       styles.container,
       {
         ...
         height: 44,
       },
       ...
     ]}
   >

   // AFTER
   const tokens = searchInputTokens;
   <Animated.View
     style={[
       styles.container,
       {
         ...
         height: tokens.height,
         paddingHorizontal: tokens.paddingHorizontal,
       },
       ...
     ]}
   >
   ```

3. Replace icon container margin:
   ```typescript
   // BEFORE
   <View style={[styles.iconContainer, { marginRight: spacing[2] }]}>

   // AFTER
   <View style={[styles.iconContainer, { marginRight: tokens.iconMarginRight }]}>
   ```

4. Replace SearchIcon size prop:
   ```typescript
   // BEFORE
   <SearchIcon color={colors.foregroundMuted} />  // default size 20

   // AFTER
   <SearchIcon color={colors.foregroundMuted} size={tokens.iconSize} />
   ```

5. Replace input fontSize:
   ```typescript
   // BEFORE
   <TextInput
     style={[
       styles.input,
       { color: colors.foreground, fontSize: 16 },
       inputStyle,
     ]}

   // AFTER
   <TextInput
     style={[
       styles.input,
       { color: colors.foreground, fontSize: tokens.fontSize },
       inputStyle,
     ]}
   ```

6. Replace ClearIcon size:
   ```typescript
   // BEFORE
   <ClearIcon color={colors.foregroundMuted} />  // default size 18

   // AFTER
   <ClearIcon color={colors.foregroundMuted} size={tokens.clearSize} />
   ```

7. Replace right container width and margin:
   ```typescript
   // BEFORE
   rightContainer: { width: 24 }
   <View style={[styles.rightContainer, { marginLeft: spacing[2] }]}>

   // AFTER
   <View style={[
     styles.rightContainer,
     { width: tokens.rightContainerWidth, marginLeft: tokens.rightContainerMarginLeft }
   ]}>
   ```

8. Clean up StyleSheet - remove hardcoded dimensions:
   ```typescript
   const styles = StyleSheet.create({
     container: {
       flexDirection: 'row',
       alignItems: 'center',
     },
     iconContainer: {
       flexShrink: 0,
     },
     input: {
       flex: 1,
       padding: 0,
       margin: 0,
     },
     rightContainer: {
       flexShrink: 0,
       alignItems: 'center',
       justifyContent: 'center',
     },
   });
   ```

Keep all existing functionality:
- Controlled/uncontrolled value handling
- Focus animation with springs.snappy
- Loading spinner display
- Clear button visibility logic
- Submit handling
  </action>
  <verify>TypeScript compiles: `cd packages/registry && npx tsc --noEmit`</verify>
  <done>SearchInput uses searchInputTokens for all sizing, StyleSheet contains only structural styles</done>
</task>

</tasks>

<verification>
1. `cd packages/registry && npx tsc --noEmit` passes
2. search-input.tsx contains `searchInputTokens` reference
3. No hardcoded 44, 16, 24, 18 values remain in component
4. Loading spinner still displays when loading=true
5. Clear button still appears when text exists and not loading
</verification>

<success_criteria>
- SearchInput uses searchInputTokens for height, fontSize, icon sizes, margins
- StyleSheet reduced to structural styles only
- Existing loading/clear/focus functionality preserved
- TypeScript compilation succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/08-advanced-components/08-05-SUMMARY.md`
</output>
